 grf {
	grfid:	"KR03";
	name:	string(STR_GRF_NAME);
	desc:	string(STR_GRF_DESC);
	version:	1;
	min_compatible_version: 1;
		//japanset3 removal
		param 4 {
			 param_japansetdisable {
					name: string(STR_PARAM_NAME_JAPANSETDISABLE);
					desc: string(STR_PARAM_DESC_JAPANSETDISABLE);
					type: bool;
					bit:  0;
					def_value: 0;
			 }
		}
		//basecosts
		param 0 {
				param_basecostbuy {
						type: int;
						name: string(STR_PARAM_NAME_BASECOSTMODBUY);
						desc: string(STR_PARAM_DESC_BASECOSTMODBUY);
						min_value: 0;
						max_value: 2;
						def_value: 1;
						names: {
												0: string(STR_PARAM_LOW);
												1: string(STR_PARAM_NORMAL);
												2: string(STR_PARAM_HIGH);
						};
				}
		}
		//runningcosts
		param 1 {
				param_basecostrun {
						type: int;
						name: string(STR_PARAM_NAME_BASECOSTMODRUN);
						desc: string(STR_PARAM_DESC_BASECOSTMODRUN);
						min_value: 0;
						max_value: 4;
						def_value: 2;
						names: {
												0: string(STR_PARAM_VLOW);
												1: string(STR_PARAM_LOW);
												2: string(STR_PARAM_NORMAL);
												3: string(STR_PARAM_HIGH);
												4: string(STR_PARAM_VHIGH);
						};
				}
		}
		//pax capacity
		param 2 {
				param_basecapacity {
						type: int;
						name: string(STR_PARAM_NAME_BASECAPACITY);
						desc: string(STR_PARAM_DESC_BASECAPACITY);
						min_value: 0;
						max_value: 3;
						def_value: 1;
						names: {
												0: string(STR_PARAM_LOW);
												1: string(STR_PARAM_NORMAL);
												2: string(STR_PARAM_HIGH);
												3: string(STR_PARAM_VHIGH);
												//4: string(STR_PARAM_REAL);
						};
				}
		}
		//extra capacity for locals
		param 3 {
			 param_boostcapacity {
					name: string(STR_PARAM_NAME_BOOSTCAPACITY);
					desc: string(STR_PARAM_DESC_BOOSTCAPACITY);
					type: bool;
					bit:  0;
			 }
		}
		//cargo decay
		param 5 {
			 param_cargodecay {
						type: int;
						name: string(STR_PARAM_NAME_DECAY);
						desc: string(STR_PARAM_DESC_DECAY);
						min_value: 0;
						max_value: 2;
						def_value: 0;
						names: {
												0: string(STR_PARAM_NORMAL);
												1: string(STR_PARAM_LOW);
												2: string(STR_PARAM_VLOW);
						};
			 }
		}
		// resolution zoom
		param 6 {
		param_resolution {
				name: string(STR_PARAM_NAME_ZOOM);
				desc: string(STR_PARAM_DESC_ZOOM);
				min_value: 0;
				max_value: 1;
				def_value: 0;
				names: {
					0: string(STR_PARAM_ZOOM_1X); 
					1: string(STR_PARAM_ZOOM_2X); 
			};
		}
	}
}


basecost {
		 PR_BUILD_VEHICLE : param_basecostbuy -1;
		 PR_BUILD_VEHICLE_WAGON: param_basecostbuy +3;
		 PR_RUNNING: param_basecostrun +1; //3
}

// Begin railtypetable

// https://newgrf-specs.tt-wiki.net/wiki/TracktypeLabels

railtypetable {
	RAIL,
	ELRL,
	SHINKANSEN: [
		RHIG, 		
		EHIG, 
		HSTR, 
		SADE, 		// JapanSet Tracks - International Mode - Highspeed line
		SAEE, 		// JapanSet Tracks - Japanese Mode - Shinkansen highspeed
		SBEE, 		// JapanSet Tracks - Japanese Mode - Modern Shinkansen highspeed
		SUBE,		// JapanSet Tracks - Japanese Mode - Urban Standard Guage (Electrified)
		SDAE, 		// U&ReRMM 2 - High-Speed Line
		SEAE,		// U&ReRMM 2 - Modern High-Speed Line
		SFAE,		// U&ReRMM 2 - Very High-Speed Line
		SHAE]		// SUKTS - Very High Speed
		,
	MINI_SHINKANSEN: [
		RHIG, 		
		EHIG, 
		HSTR, 
		SACE,		// JapanSet Tracks - Modern Standard Guage (Electrified)
		SADE, 		// JapanSet Tracks - International Mode - Highspeed line
		SAEE, 		// JapanSet Tracks - Japanese Mode - Shinkansen highspeed
		SBEE, 		// JapanSet Tracks - Japanese Mode - Modern Shinkansen highspeed
		SUBE,		// JapanSet Tracks - Japanese Mode - Urban Standard Guage (Electrified)
		SDAE, 		// U&ReRMM 2 - High-Speed Line
		SEAE,		// U&ReRMM 2 - Modern High-Speed Line
		SFAE,		// U&ReRMM 2 - Very High-Speed Line
		SHAE],		// SUKTS - Very High Speed
}

// End railtypetable

cargotable {
	PASS,
}

/*	PAX CAPACITIES	*/

// Low
if (param_basecapacity == 0) {
	param_capacity_fifty = 40;
	param_capacity_hundred = 80;
}

//Normal
if (param_basecapacity == 1) {
param_capacity_fifty = 50;
param_capacity_hundred = 100;
}

// High
if (param_basecapacity == 2) {
param_capacity_fifty = 60;
param_capacity_hundred = 120;
}

// Very High
if (param_basecapacity == 3) {
param_capacity_fifty = 70;
param_capacity_hundred = 140;
}

/*	LOADING SPEEDS	*/
if (param_basecapacity == 0) {
	param_loading_1D = 5; // 1 door //
	param_loading_2D = 10; // 2 doors //
	param_loading_3D = 20; // 3 doors //
	param_loading_4D = 40; // 4 doors //
	param_loading_5D = 45; // 5 doors //
	param_loading_6D = 55; // 6 doors //
}

if (param_basecapacity == 1) {
	param_loading_1D = 10; // 1 door //
	param_loading_2D = 20; // 2 doors //
	param_loading_3D = 30; // 3 doors //
	param_loading_4D = 50; // 4 doors //
	param_loading_5D = 55; // 5 doors //
	param_loading_6D = 65; // 6 doors //
}

if (param_basecapacity == 2) {
	param_loading_1D = 20; // 1 door //
	param_loading_2D = 30; // 2 doors //
	param_loading_3D = 40; // 3 doors //
	param_loading_4D = 60; // 4 doors //
	param_loading_5D = 65; // 5 doors //
	param_loading_6D = 75; // 6 doors //
}

if (param_basecapacity >= 3) {
	param_loading_1D = 30; // 1 door //
	param_loading_2D = 40; // 2 doors //
	param_loading_3D = 50; // 3 doors //
	param_loading_4D = 80; // 4 doors //
	param_loading_5D = 85; // 5 doors //
	param_loading_6D = 95; // 6 doors //
}

/*	CARGO DECAY	*/
if (param_cargodecay == 0) {
	param_decay_local = 185;
	param_decay_rapid = 185;
	param_decay_express = 185;
}
if (param_cargodecay == 1) {
	param_decay_local = 200;
	param_decay_rapid = 300;
	param_decay_express = 500;
}
if (param_cargodecay >= 2) {
	param_decay_local = 400;
	param_decay_rapid = 650;
	param_decay_express = 1000;
}
// Begin template

/* Dummy Template */

template template_dummy (x, y) {
  [0, 0, 2, 2, 0, 0, CROP]
  [0, 0, 2, 2, 0, 0, CROP]
  [0, 0, 2, 2, 0, 0, CROP]
  [0, 0, 2, 2, 0, 0, CROP]
  [0, 0, 2, 2, 0, 0, CROP]
  [0, 0, 2, 2, 0, 0, CROP]
  [0, 0, 2, 2, 0, 0, CROP]
  [0, 0, 2, 2, 0, 0, CROP]
}

/* Purchase Templates */

template template_purchase (x, y) {
		[]
	 	[]
	 	[]
	 	[]
	 	[]
	 	[]
    	[x, y, 75, 15, -28, -10]
		[]
}

template tmpl_purchase_dh (x, y) {
		[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty.png"]
        [x, y, 76, 15, -14, -10]
		[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty.png"]
}
template tmpl_purchase_dh_32bpp (x, y) {
		[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty_32bpp.png"]
        [x, y, 75, 15, -14, -10]
		[1 , 1, 1, 1, 0, 0, "src/gfx/dummy/empty_32bpp.png"]
}

/* EMU Templates */

template template_12_standard(x, y) {
    //left_x, upper_y, width, height, offset_x, offset_y
	//							more negative to shift left
	//											more negative to shift up
    [ x,		y,		8,		36,		-3,			-18]
    [ x+16,		y,		30,		29,		-18,		-19]
    [ x+54,		y,		48,		16,		-16,		-12]
    [ x+110,	y,		30,		29,		-10,		-19]
    [ x+148,	y,		8,		36,		-3,			-18]
    [ x+164,	y,		30,		29,		-18,		-19]
    [ x+202,	y,		48,		16,		-16,		-12]
    [ x+258,	y,		30,		29,		-10,		-19]
}

template template_12_reversed(x, y) {
    //left_x, upper_y, width, height, offset_x, offset_y
	//							more negative to shift left
	//											more negative to shift up
    [ x+148,	y,		8,		36,		-3,			-18]
    [ x+164,	y,		30,		29,		-18,		-19]
    [ x+202,	y,		48,		16,		-16,		-12]
    [ x+258,	y,		30,		29,		-10,		-19]
    [ x,		y,		8,		36,		-3,			-18]
    [ x+16,		y,		30,		29,		-18,		-19]
    [ x+54,		y,		48,		16,		-16,		-12]
    [ x+110,	y,		30,		29,		-10,		-19]
}

template template_8_standard(x, y) {
    //left_x, upper_y, width, height, offset_x, offset_y
	//							more negative to shift left
	//											more negative to shift up
    [ x,		y,		8,		36,		-3,			-18]
    [ x+20,		y,		22,		27,		-15,		-19]
    [ x+62,		y,		32,		16,		-16,		-12]
    [ x+114,	y,		22,		27,		-08,		-20]
    [ x+148,	y,		8,		36,		-3,			-18]
    [ x+168,	y,		22,		27,		-15,		-19]
    [ x+210,	y,		32,		16,		-16,		-12]
    [ x+262,	y,		22,		27,		-08,		-20]
}

template template_8_reversed(x, y) {
    //left_x, upper_y, width, height, offset_x, offset_y
	//							more negative to shift left
	//											more negative to shift up
    [ x+148,	y,		8,		36,		-3,			-18]
    [ x+168,	y,		22,		27,		-15,		-19]
    [ x+210,	y,		32,		16,		-16,		-12]
    [ x+262,	y,		22,		27,		-08,		-20]
    [ x,		y,		8,		36,		-3,			-18]
    [ x+20,		y,		22,		27,		-15,		-19]
    [ x+62,		y,		32,		16,		-16,		-12]
    [ x+114,	y,		22,		27,		-08,		-20]
}

// End template


item(FEAT_TRAINS, mu_car, 1000) {} //mucar 				0x3E8
item(FEAT_TRAINS, mu_cardd, 1001) {} //mucardd 		0x3E9
item(FEAT_TRAINS, mu_cab, 1002) {} //mucab 				0x3EA


item(FEAT_TRAINS, series_e3, 2003) {} 
item(FEAT_TRAINS, series_e5, 2005) {} 
item(FEAT_TRAINS, series_e6, 2006) {} 

 // begin dummy

 // https://www.tt-forums.net/viewtopic.php?f=68&t=53511

spriteset (dummy_sprites, "src/gfx/dummy/empty.png")
{
  [0, 0, 2, 2, 0, 0, CROP]
}

 // end dummy

// Begin mucar

/*---GFX: Spritesets---*/
spriteset (set_mu_car_purchase,	    "src/gfx/dummy/mucarbuy.png") 	{template_purchase (0, 0)}
spriteset (set_mu_car_base,       	"src/gfx/dummy/mucar.png")     	{template_8_standard(1,1)}


item(FEAT_TRAINS, mu_car) {
    /* Define properties first, make sure to set all of them */
    property {
        name:                         string(MUCAR);
        introduction_date:            date(1800,1,1);
        climates_available:           ALL_CLIMATES;
        model_life:                   VEHICLE_NEVER_EXPIRES;
        vehicle_life:                 60;
        loading_speed:                0;
        cost_factor:                  64;
        running_cost_factor:          6;
        speed:                        0 km/h;
        power:                        0 hp;
        cargo_capacity:               1;
        weight:                       0 ton;
        tractive_effort_coefficient:  0.3;
        air_drag_coefficient:         0;
        reliability_decay:            20;
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        cargo_age_period:             185;
        refit_cost:                   0;
        track_type:                   MINI_SHINKANSEN;
        ai_special_flag:              AI_FLAG_PASSENGER;
        running_cost_base:            RUNNING_COST_DIESEL;
        engine_class:                 ENGINE_CLASS_STEAM;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        dual_headed:                  0;
        length:                       8;
        extra_power_per_wagon:        0;
        bitmask_vehicle_info:         0;
    }
    /* Define graphics and callbacks
     * Setting all callbacks is not needed, only define what is used */
    graphics {
		  purchase:                     set_mu_car_purchase;
      additional_text:			        return string(MUCAR_DESC);
      set_mu_car_base;
    }

}

// End mucar

/* Begin Functions */

switch (FEAT_TRAINS, SELF, func_running_costs, cost, current_speed) {
	0: return cost / 10; // Stopped
	1..15: return cost / 4; // Moving below ~33.5 mph
	return cost; // Track speed
}

switch (FEAT_TRAINS, PARENT, func_is_reversed, vehicle_is_reversed) {return;}

/* End Functions */ 

// Begin sorting

sort(FEAT_TRAINS, [

/* JNR */
0,      // 0 Series Shinkansen

/* JR East */
2003,   // E5 Series Shinkansen
2004,   // E4 Series Shinkansen (Max)
2005,   // E5 Series Shinkansen
2006,   // E6 Series Shinkansen

/*MU Cars*/
mu_car,
]);

// End sorting

// Begin grfintegration

//set depot vehicle width to 32px to avoid overlap
train_width_32_px = 1;
//align train properly in depot window
traininfo_y_offset = 2;

// TTD check //
if (ttd_platform != PLATFORM_OPENTTD || openttd_version < version_openttd(1, 2, 0, 22723)) {
	error(FATAL, REQUIRES_OPENTTD, string(GRF_OTTDVER));
}

// 8bpp //
if (ttd_platform != PLATFORM_OPENTTD || openttd_version < version_openttd(1, 2, 0, 22723)) {
	error(FATAL, string(GRF_OTTDVER));
}

// Warn if "JapanSet3: Trains isn't optimal" //
/*
if (((grf_current_status("SZ\0D\00") == 0) && (grf_current_status("DP\30\00") == 0)) || ((grf_future_status("SZ\0D\00") == 0) && (grf_future_status("DP\30\00") == 0)) || ((grf_order_behind("SZ\0D\00") == 0) && (grf_order_behind("DP\30\00") == 0))) {
	error( WARNING, string(GRF_JAPANSET));
}
*/
if (grf_order_behind("BS\42\13") == 0) {
	error(FATAL, string(GRF_JPPLUSSET));
}
/*
if (((grf_order_behind("EN\21\01") == 0) && (grf_order_behind("BS\07\20") != 0)) || ((grf_future_status("EN\21\01") == 0) && (grf_future_status("BS\07\20") == 0)) || ((grf_current_status("EN\21\01") != 0) && (grf_current_status("BS\07\20") == 0))) {
	error(WARNING, string(GRF_NATSSET));
}*/

if (grf_order_behind("SZ\0D\00") == 0) {
	error(WARNING, string(GRF_JAPANSETTRAINS));
}

if (grf_order_behind("JD\A1\E1") == 0) {
	error(WARNING, string(GRF_JAPANSECRETORDER));
}

// End grfintegration

if (param_japansetdisable == 0) {
	disable_item(FEAT_TRAINS, 0, 115); //Disables original vehicles
}

//JPSet3 DUPLICATION
if (param_japansetdisable == 1) {
	engine_override("SZ\0D\00");

	basecost {
			PR_BUILD_VEHICLE : param_basecostbuy -1;
			PR_BUILD_VEHICLE_WAGON: param_basecostbuy +3;
			PR_RUNNING: param_basecostrun -2; //3
			PR_RUNNING_TRAIN_STEAM: param_basecostrun -2;
			PR_RUNNING_TRAIN_DIESEL: param_basecostrun +1;
			PR_RUNNING_TRAIN_ELECTRIC:param_basecostrun -2;

	}

	item(FEAT_TRAINS, japanset_113, 0x49) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_151, 0x13) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_485, 0x38) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_80, 0x11) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_101, 0x30) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_103, 0x60) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_201, 0x25) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_205, 0x28) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_209, 0x68) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_223, 0x42) {
		property {
			climates_available: NO_CLIMATE;
		}
	}
	item(FEAT_TRAINS, japanset_E231, 0x44) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_E233, 0x5B) {
		property {
			climates_available: NO_CLIMATE;
		}
	} 
	item(FEAT_TRAINS, japanset_281, 0x41) {
		property {
			climates_available: NO_CLIMATE;
		}
	}
	item(FEAT_TRAINS, japanset_415, 0x62) {
		property {
			climates_available: NO_CLIMATE;
		}
	}
	item(FEAT_TRAINS, japanset_789, 0x64) {
		property {
			climates_available: NO_CLIMATE;
		}
	}
	item(FEAT_TRAINS, japanset_kh80, 0x48) {
		property {
			climates_available: NO_CLIMATE;
		}
	}
}



/* 
JapanSet3 IDs

01 8620 Steam
02 ED17 Electric
03 D50 Steam
04 C53 Steam
05 C11 Steam
06 C12 Steam
07 40 Series EMU
08 EF10 Electric


*/











/*
NATS DUPLICATION DEPRECIATED
engine_override("EN\21\01");

//disable the 211
item(FEAT_TRAINS, JRC211_6, 0x20D) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_5, 0x20C) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_4, 0x20B) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_3, 0x20A) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_2, 0x209) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_2, 0x205) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_3, 0x206) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_4, 0x207) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_6, 0x208) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC311, 0x205) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA25, 0x201) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA75, 0x202) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA11, 0x200) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC119_1, 0x203) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC119_2, 0x204) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC373, 0x250) {
	property {
		climates_available: NO_CLIMATE;
	}
}



//engine_override("JD\A1\E1"); jpsecret
//jnr_ef63, 1040

}
*/
/* Begin 0 Series */

/* SPRITES */

/* Purchase Menu */
spriteset (ss_0_series_buy_original_livery,	        	        "src/gfx/dummy/purchase.png") {template_purchase(0, 0)}
spriteset (ss_0_series_buy_kodama_livery,	        	        "src/gfx/dummy/purchase.png") {template_purchase(0, 0)}

alternative_sprites(ss_0_series_buy_original_livery,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/purchase_original.png") {template_purchase(0, 0)}
alternative_sprites(ss_0_series_buy_kodama_livery,     	        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/purchase_kodama.png") {template_purchase(0, 0)}

/* EMU Parts */

/* "HEAD" */
spriteset(ss_0_series_head_original_livery,             		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_head_reversed_original_livery,    		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_head_kodama_livery,             		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_head_reversed_kodama_livery,    		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_head_nose_livery,             		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_head_reversed_nose_livery,    		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}

// 0 Series Original Strip Livery
alternative_sprites(ss_0_series_head_original_livery,     	    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/original.png") {template_12_standard(1,1)}
alternative_sprites(ss_0_series_head_reversed_original_livery,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/original.png") {template_12_reversed(1,1)}		

// 0 Series Kodama Strip Livery
alternative_sprites(ss_0_series_head_kodama_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/kodama.png") {template_12_standard(1,1)}
alternative_sprites(ss_0_series_head_reversed_kodama_livery,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/kodama.png") {template_12_reversed(1,1)}	

// 0 Series Nose Livery
alternative_sprites(ss_0_series_head_nose_livery,     		    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/nose.png") {template_12_standard(1,1)}
alternative_sprites(ss_0_series_head_reversed_nose_livery,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/nose.png") {template_12_reversed(1,1)}

/* COACH */
spriteset(ss_0_series_coach_original_livery,             		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_coach_reversed_original_livery,    		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_coach_kodama_livery,             		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_coach_reversed_kodama_livery,    		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_coach_nose_livery,             		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_coach_reversed_nose_livery,    		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}

// 0 Series Original Strip Livery
alternative_sprites(ss_0_series_coach_original_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/original.png") {template_12_standard(1,121)}
alternative_sprites(ss_0_series_coach_reversed_original_livery, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/original.png") {template_12_reversed(1,121)}

// 0 Series Kodama Strip Livery
alternative_sprites(ss_0_series_coach_kodama_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/kodama.png") {template_12_standard(1,121)}
alternative_sprites(ss_0_series_coach_reversed_kodama_livery,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/kodama.png") {template_12_reversed(1,121)}	

// 0 Series Nose Livery
alternative_sprites(ss_0_series_coach_nose_livery,     		    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/nose.png") {template_12_standard(1,121)}
alternative_sprites(ss_0_series_coach_reversed_nose_livery,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/nose.png") {template_12_reversed(1,121)}

// PANTO COACH
spriteset(ss_0_series_panto_original_livery,          		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_panto_reversed_original_livery, 		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_panto_kodama_livery,          		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_panto_reversed_kodama_livery, 		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_panto_nose_livery,          		        "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_panto_reversed_nose_livery, 		        "src/gfx/dummy/empty.png") {template_dummy(0,0)}

// 0 Series Original Strip Livery
alternative_sprites(ss_0_series_panto_original_livery,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/original.png") {template_12_standard(1,81)}
alternative_sprites(ss_0_series_panto_reversed_original_livery, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/original.png") {template_12_reversed(1,81)}	

// 0 Series Kodama Strip Livery
alternative_sprites(ss_0_series_panto_kodama_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/kodama.png") {template_12_standard(1,81)}
alternative_sprites(ss_0_series_panto_reversed_kodama_livery,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/kodama.png") {template_12_reversed(1,81)}	

// 0 Series Nose Livery
alternative_sprites(ss_0_series_panto_nose_livery,     		    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/nose.png") {template_12_standard(1,81)}
alternative_sprites(ss_0_series_panto_reversed_nose_livery,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/nose.png") {template_12_reversed(1,81)}	

// TAIL
spriteset(ss_0_series_tail_original_livery,             		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_tail_reversed_original_livery,    		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_tail_kodama_livery,             		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_tail_reversed_kodama_livery,    		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_tail_nose_livery,             		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_0_series_tail_reversed_nose_livery,    		    "src/gfx/dummy/empty.png") {template_dummy(0,0)}

// 0 Series Original Strip Livery
alternative_sprites(ss_0_series_tail_original_livery,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/original.png") {template_12_reversed(1,41)}
alternative_sprites(ss_0_series_tail_reversed_original_livery,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/original.png") {template_12_standard(1,41)}		

// 0 Series Kodama Strip Livery
alternative_sprites(ss_0_series_tail_kodama_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/kodama.png") {template_12_reversed(1,41)}
alternative_sprites(ss_0_series_tail_reversed_kodama_livery,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/kodama.png") {template_12_standard(1,41)}

// 0 Series Nose Livery
alternative_sprites(ss_0_series_tail_nose_livery,     		    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/nose.png") {template_12_reversed(1,41)}
alternative_sprites(ss_0_series_tail_reversed_nose_livery,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/0_series/nose.png") {template_12_standard(1,41)}

/* PICK THE LIVERY */

// HEAD

switch(FEAT_TRAINS, SELF, sw_0_series_head_year_dep_livery, build_year) {
    0..2002: ss_0_series_head_original_livery;
    2002..9999: ss_0_series_head_kodama_livery;
    ss_0_series_head_original_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_head_old_livery, cargo_subtype) {
    1: ss_0_series_head_original_livery;
    2: ss_0_series_head_nose_livery;
    sw_0_series_head_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_head_new_livery, cargo_subtype) {
    1: ss_0_series_head_original_livery;
    2: ss_0_series_head_nose_livery;
    3: ss_0_series_head_kodama_livery;
    sw_0_series_head_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, ss_0_series_head, current_year) {
    0..2002: sw_0_series_head_old_livery;
    sw_0_series_head_new_livery;
}

// COACH

switch(FEAT_TRAINS, SELF, sw_0_series_coach_year_dep_livery, build_year) {
    0..2002: ss_0_series_coach_original_livery;
    2002..9999: ss_0_series_coach_kodama_livery;
    ss_0_series_coach_original_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_coach_old_livery, cargo_subtype) {
    1: ss_0_series_coach_original_livery;
    2: ss_0_series_coach_nose_livery;
    sw_0_series_coach_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_coach_new_livery, cargo_subtype) {
    1: ss_0_series_coach_original_livery;
    2: ss_0_series_coach_nose_livery;
    3: ss_0_series_coach_kodama_livery;
    sw_0_series_coach_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, ss_0_series_coach, current_year) {
    0..2002: sw_0_series_coach_old_livery;
    sw_0_series_coach_new_livery;
}

// COACH REVERSED

switch(FEAT_TRAINS, SELF, sw_0_series_coach_reversed_year_dep_livery, build_year) {
    0..2002: ss_0_series_coach_reversed_original_livery;
    2002..9999: ss_0_series_coach_reversed_kodama_livery;
    ss_0_series_coach_reversed_original_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_coach_reversed_old_livery, cargo_subtype) {
    1: ss_0_series_coach_reversed_original_livery;
    2: ss_0_series_coach_reversed_nose_livery;
    sw_0_series_coach_reversed_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_coach_reversed_new_livery, cargo_subtype) {
    1: ss_0_series_coach_reversed_original_livery;
    2: ss_0_series_coach_reversed_nose_livery;
    3: ss_0_series_coach_reversed_kodama_livery;
    sw_0_series_coach_reversed_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, ss_0_series_coach_reversed, current_year) {
    0..2002: sw_0_series_coach_reversed_old_livery;
    sw_0_series_coach_reversed_new_livery;
}

// PANTO

switch(FEAT_TRAINS, SELF, sw_0_series_panto_year_dep_livery, build_year) {
    0..2002: ss_0_series_panto_original_livery;
    2002..9999: ss_0_series_panto_kodama_livery;
    ss_0_series_panto_original_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_panto_old_livery, cargo_subtype) {
    1: ss_0_series_panto_original_livery;
    2: ss_0_series_panto_nose_livery;
    sw_0_series_panto_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_panto_new_livery, cargo_subtype) {
    1: ss_0_series_panto_original_livery;
    2: ss_0_series_panto_nose_livery;
    3: ss_0_series_panto_kodama_livery;
    sw_0_series_panto_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, ss_0_series_panto, current_year) {
    0..2002: sw_0_series_panto_old_livery;
    sw_0_series_panto_new_livery;
}

// PANTO REVERSED

switch(FEAT_TRAINS, SELF, sw_0_series_panto_reversed_year_dep_livery, build_year) {
    0..2002: ss_0_series_panto_reversed_original_livery;
    2002..9999: ss_0_series_panto_reversed_kodama_livery;
    ss_0_series_panto_reversed_original_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_panto_reversed_old_livery, cargo_subtype) {
    1: ss_0_series_panto_reversed_original_livery;
    2: ss_0_series_panto_reversed_nose_livery;
    sw_0_series_panto_reversed_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_panto_reversed_new_livery, cargo_subtype) {
    1: ss_0_series_panto_reversed_original_livery;
    2: ss_0_series_panto_reversed_nose_livery;
    3: ss_0_series_panto_reversed_kodama_livery;
    sw_0_series_panto_reversed_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, ss_0_series_panto_reversed, current_year) {
    0..2002: sw_0_series_panto_reversed_old_livery;
    sw_0_series_panto_reversed_new_livery;
}

// TAIL

switch(FEAT_TRAINS, SELF, sw_0_series_tail_year_dep_livery, build_year) {
    0..2002: ss_0_series_tail_original_livery;
    2002..9999: ss_0_series_tail_kodama_livery;
    ss_0_series_tail_original_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_tail_old_livery, cargo_subtype) {
    1: ss_0_series_tail_original_livery;
    2: ss_0_series_tail_nose_livery;
    sw_0_series_tail_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_tail_new_livery, cargo_subtype) {
    1: ss_0_series_tail_original_livery;
    2: ss_0_series_tail_nose_livery;
    3: ss_0_series_tail_kodama_livery;
    sw_0_series_tail_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, ss_0_series_tail, current_year) {
    0..2002: sw_0_series_tail_old_livery;
    sw_0_series_tail_new_livery;
}

// Pre 2002 subtype text
switch(FEAT_TRAINS, SELF, sw_0_series_old_livery_subtype_text, cargo_subtype) {
    0: return string(LV_YEAR_DEP_LIVERY);
	1: return string(LV_0_SERIES_ORIGINAL);
    2: return string(LV_0_SERIES_NOSE); 
       return CB_RESULT_NO_TEXT;
    }

// Post 2002 subtype text
switch(FEAT_TRAINS, SELF, sw_0_series_new_livery_subtype_text, cargo_subtype) {
    0: return string(LV_YEAR_DEP_LIVERY);
	1: return string(LV_0_SERIES_ORIGINAL);
    2: return string(LV_0_SERIES_NOSE);
    3: return string(LV_0_SERIES_KODAMA);
       return CB_RESULT_NO_TEXT;
    }

switch(FEAT_TRAINS, SELF, sw_0_series_year_dep_purchase, current_year) {
    0..2002: ss_0_series_buy_original_livery;
    ss_0_series_buy_kodama_livery;
}

switch(FEAT_TRAINS, SELF, sw_0_series_year_dep_subtype_text, current_year) {
    0..2002: sw_0_series_old_livery_subtype_text;
    sw_0_series_new_livery_subtype_text;
}

/* COACHES 
  Repeating 4 switches to create a;
1) Coach Car going forwards and a Panto Car going backwards
2) Coach Car going forwards and a Coach Car going backwards
3) Panto Car going forwards and a Coach Car going backwards
4) Panto Car going forwards and a Panto Car going backwards

   1) check reversed */ 
switch (FEAT_TRAINS, PARENT, sw_0_series_reverser_C_P, vehicle_is_reversed) {
	0: ss_0_series_coach;
	ss_0_series_panto_reversed;
}

/* 2) check reversed */ 

switch (FEAT_TRAINS, PARENT, sw_0_series_reverser_C_C, vehicle_is_reversed) {
	0: ss_0_series_coach;
	ss_0_series_coach_reversed;
}


/* 3) check reversed */ 
switch (FEAT_TRAINS, PARENT, sw_0_series_reverser_P_C, vehicle_is_reversed) {
	0: ss_0_series_panto;
	ss_0_series_coach_reversed;
}

/* 4) check reversed */ 
/*
switch (FEAT_TRAINS, PARENT, sw_0_series_reverser_P_P, vehicle_is_reversed) {
	0: ss_0_series_panto;
	ss_0_series_panto_reversed;
}
*/
/* LENGTH*/

/* Make the Middle long sprite length 8 and the dummy sprites length 2*/
switch (FEAT_TRAINS, SELF, sw_0_series_length, position_in_consist%3) {
    1: return 8;
    return 2;
}

/* PUT TOGETHER THE EMU*/

/* Select the correct part of the train */
switch (FEAT_TRAINS, SELF, sw_0_series_graphics_8car, position_in_articulated_veh) {
	// Car 1
    0:  dummy_sprites; 					
	1:  ss_0_series_head; 					
	2:  dummy_sprites;
    // Car 2					
	3:  dummy_sprites; 					
	4:  sw_0_series_reverser_C_C;					
	5:  dummy_sprites;
    // Car 3					
	6:  dummy_sprites;					
	7:  sw_0_series_reverser_C_P;
	8:  dummy_sprites;
    // Car 4
	9:  dummy_sprites;
	10: sw_0_series_reverser_P_C;
	11: dummy_sprites;
    // Car 5
    12: dummy_sprites;
    13: sw_0_series_reverser_C_P;
    14: dummy_sprites;
    // Car 6
    15: dummy_sprites;
    16: sw_0_series_reverser_P_C;
    17: dummy_sprites;
    // Car 7
    18: dummy_sprites;
    19: sw_0_series_reverser_C_C;
    20: dummy_sprites;
    // Car 8
    21: dummy_sprites;
	22: ss_0_series_tail;
	23: dummy_sprites;
}

switch (FEAT_TRAINS, SELF, sw_0_series_graphics_4car, position_in_articulated_veh) {
	// Car 1
    0:  dummy_sprites; 					
	1:  ss_0_series_head; 					
	2:  dummy_sprites;
    // Car 2					
	3:  dummy_sprites; 					
	4:  sw_0_series_reverser_C_C;					
	5:  dummy_sprites;
    // Car 3					
	6:  dummy_sprites;					
	7:  sw_0_series_reverser_C_P;
	8:  dummy_sprites;
    // Car 4
    9: dummy_sprites;
	10: ss_0_series_tail;
	11: dummy_sprites;
}

switch (FEAT_TRAINS, SELF, sw_0_series_graphics, cargo_subtype) {
    0: sw_0_series_graphics_8car;
    1: sw_0_series_graphics_8car;
    2: sw_0_series_graphics_4car;
    3: sw_0_series_graphics_8car;
}


/* Assemble an 8-car articulated vehicle. */
switch (FEAT_TRAINS, SELF, sw_0_series_articulated_part_8car, extra_callback_info1) {
	1 .. 23: return series_0;										// Should be same as range above
	return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch (FEAT_TRAINS, SELF, sw_0_series_articulated_part_4car, extra_callback_info1) {
	1 .. 11: return series_0;										// Should be same as range above
	return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch (FEAT_TRAINS, SELF, sw_0_series_articulated_part, cargo_subtype) {
    0: sw_0_series_articulated_part_8car;
    1: sw_0_series_articulated_part_8car;
    2: sw_0_series_articulated_part_4car;
    3: sw_0_series_articulated_part_8car;
}

switch (FEAT_TRAINS, SELF, sw_0_series_visual_effect_and_powered, ((position_in_articulated_veh == 0) && !func_is_reversed()) || ((position_in_articulated_veh_from_end == 0) && func_is_reversed()) ) {
	1: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 0, ENABLE_WAGON_POWER);
	return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}

// Speed
switch (FEAT_TRAINS, SELF, sw_0_series_speed, current_year) {
	0..1986: return 210;                        // Until 1986, Speed = 210 km/h
	return 220;                                 // After 1986, Speed = 220 km/h
}

item(FEAT_TRAINS, series_0, 0) {
	property {
		name: 							string(STR_NAME_0_SERIES);
		climates_available:             ALL_CLIMATES;
		introduction_date:              date(1964,10,01);           // Date of launch
		model_life:                     34;		                    // Until 2008
		vehicle_life:                   30;							// 
		reliability_decay:              5;
		refittable_cargo_classes:       bitmask(CC_PASSENGERS);
		refit_cost:                     0;
		default_cargo_type:             PASS;
		cargo_capacity:                 1;							// 
		loading_speed:                  50;							
		cargo_age_period:               278; 						// 1.5 times normal for this expensive long-distance train
		sprite_id:                      SPRITE_ID_NEW_TRAIN; 		// required to enable new graphics
		//speed:                        // Variable speed set in graphics block
		misc_flags:                     bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_TILT, TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		track_type:                     SHINKANSEN;
		ai_special_flag:                AI_FLAG_PASSENGER;
		running_cost_base:              RUNNING_COST_STEAM;
		engine_class:                   ENGINE_CLASS_ELECTRIC;
		power:                          8050 kW;					// Agreed to Wikipedia
		weight:                         302 tons;					// Agreed to Wikipedia 
		tractive_effort_coefficient:    0.3;

	}
	graphics {
		default:                        sw_0_series_graphics;
		purchase:                       sw_0_series_year_dep_purchase;
		articulated_part:               sw_0_series_articulated_part;
		length:                         sw_0_series_length;
        speed:							sw_0_series_speed;
		cargo_capacity:                 50;
		//colour_mapping:                 sw_cc_blue_white;s
		cargo_subtype_text:             sw_0_series_year_dep_subtype_text;
		cost_factor:                    257;
		running_cost_factor:            func_running_costs(300);
		purchase_running_cost_factor:   300;
		visual_effect_and_powered:      sw_0_series_visual_effect_and_powered;
		additional_text:                string(STR_DESC_0_SERIES);
	}
}

/* End 0 series */

// Begin e3_series

/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_e3_series_purchase,	        	"src/gfx/dummy/purchase.png")               		{tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_e3_series_purchase,     		
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			"src/gfx/e3_series/purchase_32bpp_1000.png")     	 	{tmpl_purchase_dh_32bpp(0, 0)}

//E3 Series R Set
spriteset(spriteset_e3_series_front_r,                    "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_back_r,                     "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_mid_r,                      "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_mid_panto_r,                "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_back_panto_r,               "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

spriteset(spriteset_e3_series_rev_front_r,                "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_rev_back_r,                 "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_rev_mid_r,                  "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_rev_mid_panto_r,            "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_rev_back_panto_r,           "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

spriteset(spriteset_e3_series_revflip_front_r,            "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_revflip_back_r,             "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_revflip_mid_r,              "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_revflip_mid_panto_r,        "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_revflip_back_panto_r,       "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

alternative_sprites(spriteset_e3_series_front_r,                    // Front
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e3_series_back_r,                     // Back
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,41)}
alternative_sprites(spriteset_e3_series_mid_r,                      // Coach
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,121)}
alternative_sprites(spriteset_e3_series_mid_panto_r,                // Panto
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,81)}
alternative_sprites(spriteset_e3_series_back_panto_r,               // Back (Back Panto)
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,41)}

alternative_sprites(spriteset_e3_series_rev_front_r,                // Back
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,41)}
alternative_sprites(spriteset_e3_series_rev_back_r,                 // Front
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e3_series_rev_mid_r,                  // Coach
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,121)}
alternative_sprites(spriteset_e3_series_rev_mid_panto_r,            // Panto     
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,81)}
alternative_sprites(spriteset_e3_series_rev_back_panto_r,           // Front (Front Panto))    
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,1)}

alternative_sprites(spriteset_e3_series_revflip_front_r,            // Back reversed         
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_reversed(1,41)}
alternative_sprites(spriteset_e3_series_revflip_back_r,             // Front    
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e3_series_revflip_mid_r,              // Coach reversed    
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_reversed(1,121)}
alternative_sprites(spriteset_e3_series_revflip_mid_panto_r,        // Panto reversed
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_reversed(1,81)}
alternative_sprites(spriteset_e3_series_revflip_back_panto_r,       // Front Panto   
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_r.png")                 {template_8_standard(1, 1)}

//E3-1000 Series
spriteset(spriteset_e3_series_front_1000,                    "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_back_1000,                     "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_mid_1000,                      "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_mid_panto_1000,                "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_back_panto_1000,               "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

spriteset(spriteset_e3_series_rev_front_1000,                "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_rev_back_1000,                 "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_rev_mid_1000,                  "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_rev_mid_panto_1000,            "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_rev_back_panto_1000,           "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

spriteset(spriteset_e3_series_revflip_front_1000,            "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_revflip_back_1000,             "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_revflip_mid_1000,              "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_revflip_mid_panto_1000,        "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e3_series_revflip_back_panto_1000,       "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

alternative_sprites(spriteset_e3_series_front_1000,                 // Front
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e3_series_back_1000,                  // Back
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,41)}
alternative_sprites(spriteset_e3_series_mid_1000,                   // Coach
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,121)}
alternative_sprites(spriteset_e3_series_mid_panto_1000,             // Panto
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,81)}
alternative_sprites(spriteset_e3_series_back_panto_1000,            // Back (Back Panto)
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,41)}

alternative_sprites(spriteset_e3_series_rev_front_1000,             // Back
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,41)}
alternative_sprites(spriteset_e3_series_rev_back_1000,              // Front
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e3_series_rev_mid_1000,               // Coach
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,121)}
alternative_sprites(spriteset_e3_series_rev_mid_panto_1000,         // Panto     
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,81)}
alternative_sprites(spriteset_e3_series_rev_back_panto_1000,        // Front (Front Panto)  
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,1)}

alternative_sprites(spriteset_e3_series_revflip_front_1000,         // Back reversed         
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_reversed(1,41)}
alternative_sprites(spriteset_e3_series_revflip_back_1000,          // Front    
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e3_series_revflip_mid_1000,           // Coach reversed     
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_reversed(1,121)}
alternative_sprites(spriteset_e3_series_revflip_mid_panto_1000,     // Panto reversed
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_reversed(1,81)}
alternative_sprites(spriteset_e3_series_revflip_back_panto_1000,    // Front Panto   
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e3_series/e3_1000.png")                 {template_8_standard(1, 1)}

/*---END OF SECTION---*/
/*---GFX: Train Reversing Switches---*/
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_rev_front_r;
1 : spriteset_e3_series_rev_front_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_revflip_front_r;
1 : spriteset_e3_series_revflip_front_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_rev_back_r;
1 : spriteset_e3_series_rev_back_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_revflip_back_r;
1 : spriteset_e3_series_revflip_back_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_rev_mid_r;
1 : spriteset_e3_series_rev_mid_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_revflip_mid_r;
1 : spriteset_e3_series_revflip_mid_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_rev_mid_panto_r;
1 : spriteset_e3_series_rev_mid_panto_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_revflip_mid_panto_r;
1 : spriteset_e3_series_revflip_mid_panto_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_rev_back_panto_r;
1 : spriteset_e3_series_rev_back_panto_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e3_series_revflip_back_panto_r;
1 : spriteset_e3_series_revflip_back_panto_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1 : sw_e3_series_gfx_rev_front_livery;
  default : sw_e3_series_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1 : sw_e3_series_gfx_rev_back_livery;
  default : sw_e3_series_gfx_revflip_back_livery;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1 : sw_e3_series_gfx_rev_mid_livery;
  default : sw_e3_series_gfx_revflip_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1 : sw_e3_series_gfx_rev_mid_panto_livery;
  default : sw_e3_series_gfx_revflip_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1 : sw_e3_series_gfx_rev_back_panto_livery;
  default : sw_e3_series_gfx_revflip_back_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_pantograph_pos_r_sw1, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
 0 : sw_e3_series_gfx_rev_mid_panto_flippedcheck;
 default : sw_e3_series_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_pantograph_pos_r_sw2, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){
 1 : sw_e3_series_gfx_rev_mid_panto_flippedcheck;
 //4 : sw_e3_series_gfx_rev_mid_panto_flippedcheck;
 7 : sw_e3_series_gfx_rev_mid_panto_flippedcheck;
 default : sw_e3_series_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_pantograph_pos_1000_sw1, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
 0 : sw_e3_series_gfx_rev_mid_panto_flippedcheck;
 default : sw_e3_series_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_pantograph_pos_1000_sw2, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){
 1 : sw_e3_series_gfx_rev_mid_panto_flippedcheck;
 //4 : sw_e3_series_gfx_rev_mid_panto_flippedcheck;
 7 : sw_e3_series_gfx_rev_mid_panto_flippedcheck;
 default : sw_e3_series_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_pantograph_pos_r, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
  0..2 : sw_e3_series_gfx_rev_pantograph_pos_r_sw1;
  default : sw_e3_series_gfx_rev_pantograph_pos_r_sw2;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_pantograph_pos_1000, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
  0..2 : sw_e3_series_gfx_rev_pantograph_pos_1000_sw1;
  default : sw_e3_series_gfx_rev_pantograph_pos_1000_sw2;
}
switch(FEAT_TRAINS,SELF, sw_e3_series_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : sw_e3_series_gfx_rev_pantograph_pos_r;
1 : sw_e3_series_gfx_rev_pantograph_pos_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
 0 : sw_e3_series_gfx_rev_back_flippedcheck;
 default : sw_e3_series_gfx_rev_back_panto_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_frontback_nomucars,
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){
 1 : sw_e3_series_gfx_rev_front_flippedcheck;
 0 : sw_e3_series_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_frontback_aftermucars,
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){
 1 : sw_e3_series_gfx_rev_back_pantocheck;
 0 : sw_e3_series_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_frontback_mucarcheck,
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),
var[0x61, 0, 0x0000FFFF, 0xC6]]){
 1000 : sw_e3_series_gfx_rev_frontback_aftermucars;
 default : sw_e3_series_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_frontback_sameid,
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
 2003 : sw_e3_series_gfx_rev_frontback_mucarcheck;
 1000 : sw_e3_series_gfx_rev_front_flippedcheck;
 default : sw_e3_series_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_frontback,
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
 2003 : sw_e3_series_gfx_rev_frontback_sameid;
 1000 : sw_e3_series_gfx_rev_back_pantocheck;
 default : sw_e3_series_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
 1000 : sw_e3_series_gfx_rev_pantograph_pos;
 2003 : sw_e3_series_gfx_rev_frontback;
}
/*---END OF SECTION---*/
/*---GFX: Pantograph Positions---*/
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_pantograph_pos_r_sw1, position_in_vehid_chain){
 0 : spriteset_e3_series_mid_panto_r;
 default : spriteset_e3_series_mid_r;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_pantograph_pos_r_sw2, position_in_vehid_chain%10){
 1 : spriteset_e3_series_mid_panto_r;
 //4 : spriteset_e3_series_mid_panto_r;
 7 : spriteset_e3_series_mid_panto_r;
 default : spriteset_e3_series_mid_r;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_pantograph_pos_1000_sw1, position_in_vehid_chain){
 0 : spriteset_e3_series_mid_panto_1000;
 default : spriteset_e3_series_mid_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_pantograph_pos_1000_sw2, position_in_vehid_chain%10){
 1 : spriteset_e3_series_mid_panto_1000;
 //4 : spriteset_e3_series_mid_panto_1000;
 7 : spriteset_e3_series_mid_panto_1000;
 default : spriteset_e3_series_mid_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_pantograph_pos_r, num_vehs_in_vehid_chain){
  0..2 : sw_e3_series_gfx_pantograph_pos_r_sw1;
  default : sw_e3_series_gfx_pantograph_pos_r_sw2;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_pantograph_pos_1000, num_vehs_in_vehid_chain){
  0..2 : sw_e3_series_gfx_pantograph_pos_1000_sw1;
  default : sw_e3_series_gfx_pantograph_pos_1000_sw2;
}
/*---END OF SECTION---*/
/*---GFX: Front/Back Cab Car Switches---*/
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_pantocheck_r, position_in_vehid_chain){
 0: spriteset_e3_series_back_r;
default: spriteset_e3_series_back_panto_r;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_frontback_flipcheck_r, vehicle_is_flipped){
 0: spriteset_e3_series_front_r;
 default: sw_e3_series_gfx_pantocheck_r;
}
switch(FEAT_TRAINS, PARENT, sw_e3_series_gfx_frontback_r, vehicle_is_reversed){
 0: sw_e3_series_gfx_frontback_flipcheck_r;
 default: sw_e3_series_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_pantocheck_1000, position_in_vehid_chain){
 0: spriteset_e3_series_back_1000;
default: spriteset_e3_series_back_panto_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_frontback_flipcheck_1000, vehicle_is_flipped){
 0: spriteset_e3_series_front_1000;
 default: sw_e3_series_gfx_pantocheck_1000;
}
switch(FEAT_TRAINS, PARENT, sw_e3_series_gfx_frontback_1000, vehicle_is_reversed){
 0: sw_e3_series_gfx_frontback_flipcheck_1000;
 default: sw_e3_series_gfx_rev_idcheck;
}
/*---END OF SECTION---*/
/*---GFX: Middle Car Switches---*/
switch(FEAT_TRAINS, PARENT, sw_e3_series_gfx_mucar_revcheck_mid_r, vehicle_is_reversed){
 0: sw_e3_series_gfx_pantograph_pos_r;
 default: sw_e3_series_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_e3_series_gfx_mucar_revcheck_mid_1000, vehicle_is_reversed){
 0: sw_e3_series_gfx_pantograph_pos_1000;
 default: sw_e3_series_gfx_rev_idcheck;
}
/*---END OF SECTION---*/
/*---GFX: Livery Refitting Switches---*/
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_mucar,  cargo_subtype) {
0 : sw_e3_series_gfx_mucar_revcheck_mid_r;
1 : sw_e3_series_gfx_mucar_revcheck_mid_1000;
}
switch(FEAT_TRAINS, SELF, sw_e3_series_gfx_main,  cargo_subtype) {
0 : sw_e3_series_gfx_frontback_r;
1 : sw_e3_series_gfx_frontback_1000;
}
/*---END OF SECTION---*/
/*---GFX: Livery Menu Switches---*/
switch(FEAT_TRAINS, SELF, sw_e3_series_subtypetext_mucar, cargo_subtype) {
0 : string(LV_E3_SERIES_R);
1 : string(LV_E3_SERIES_1000);
}
switch(FEAT_TRAINS, SELF, sw_e3_series_subtypetext_main, cargo_subtype) {
0 : string(LV_E3_SERIES_R);
1 : string(LV_E3_SERIES_1000);
}
/*---END OF SECTION---*/
/*---Coupling Switch---*/
switch(FEAT_TRAINS, SELF, sw_e3_series_attach_vehid, [vehicle_type_id == series_e3 || vehicle_type_id == mu_car]) {
 0: return string(MU_UNIQUE);
}
/*---END OF SECTION---*/

item(FEAT_TRAINS, series_e3) {
    property {
        name:                         string(STR_NAME_E3_SERIES );
        introduction_date:            date(1997,03,22);
        model_life:                   VEHICLE_NEVER_EXPIRES;
        vehicle_life:                 38;
        reliability_decay:            21;

        cargo_capacity:               param_capacity_fifty;
        loading_speed:                param_loading_2D;
        cost_factor:                  18;
        running_cost_factor:          48;

        speed:                        275 km/h;
        track_type:                   MINI_SHINKANSEN;
        power:                        2000 kW;
        weight:                       42 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_e3_series_gfx_main;
		    purchase:                 spriteset_e3_series_purchase;
		    additional_text:	      return string(STR_DESC_E6_SERIES);
        cargo_subtype_text:           sw_e3_series_subtypetext_main;
        can_attach_wagon:			  sw_e3_series_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_e3_series_gfx_mucar;
        cargo_capacity:               param_capacity_fifty;
        loading_speed:                param_loading_2D;
        cargo_subtype_text:           sw_e3_series_subtypetext_mucar;
        power: 400/2;
        weight: 30;
      }

}

// End e3_series

/* Begin e4 Series */

/* SPRITES */

/* Purchase Menu */
spriteset (ss_e4_series_buy_yellow_livery,	        	"src/gfx/dummy/purchase.png")               		{template_purchase(0, 0)}
spriteset (ss_e4_series_buy_pink_livery,	        	"src/gfx/dummy/purchase.png")               		{template_purchase(0, 0)}

alternative_sprites(ss_e4_series_buy_yellow_livery,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/purchase_yellow.png") {template_purchase(0, 0)}
alternative_sprites(ss_e4_series_buy_pink_livery,     	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/purchase_pink.png")   {template_purchase(0, 0)}

/* EMU Parts */

/* "HEAD" */
spriteset(ss_e4_series_head_yellow_livery,             		    "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_head_reversed_yellow_livery,    		    "src/gfx/dummy/empty.png")        		{template_dummy(0,0)}
spriteset(ss_e4_series_head_pink_livery,             		    "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_head_reversed_pink_livery,    		    "src/gfx/dummy/empty.png")        		{template_dummy(0,0)}

// E4 Series Yellow Strip Livery
alternative_sprites(ss_e4_series_head_yellow_livery,     	    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4y.png") {template_12_standard(1,1)}
alternative_sprites(ss_e4_series_head_reversed_yellow_livery,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4y.png") {template_12_reversed(1,1)}		

// E4 Series Pink Strip Livery
alternative_sprites(ss_e4_series_head_pink_livery,     		    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4p.png") {template_12_standard(1,1)}
alternative_sprites(ss_e4_series_head_reversed_pink_livery,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4p.png") {template_12_reversed(1,1)}	

/* COACH */
spriteset(ss_e4_series_coach_yellow_livery,             		"src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_coach_reversed_yellow_livery,    		"src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_coach_pink_livery,             		    "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_coach_reversed_pink_livery,    		    "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}

// E4 Series Yellow Strip Livery
alternative_sprites(ss_e4_series_coach_yellow_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4y.png") {template_12_standard(1,121)}
alternative_sprites(ss_e4_series_coach_reversed_yellow_livery,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4y.png") {template_12_reversed(1,121)}

// E4 Series Pink Strip Livery
alternative_sprites(ss_e4_series_coach_pink_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4p.png") {template_12_standard(1,121)}
alternative_sprites(ss_e4_series_coach_reversed_pink_livery,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4p.png") {template_12_reversed(1,121)}	

// Coach Panto
spriteset(ss_e4_series_panto_yellow_livery,          		    "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_panto_reversed_yellow_livery, 		    "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_panto_pink_livery,          		        "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_panto_reversed_pink_livery, 		        "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}

// E4 Series Yellow Strip Livery
alternative_sprites(ss_e4_series_panto_yellow_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4y.png") {template_12_standard(1,81)}
alternative_sprites(ss_e4_series_panto_reversed_yellow_livery,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4y.png") {template_12_reversed(1,81)}	

// E4 Series Pink Strip Livery
alternative_sprites(ss_e4_series_panto_pink_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4p.png") {template_12_standard(1,81)}
alternative_sprites(ss_e4_series_panto_reversed_pink_livery,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4p.png") {template_12_reversed(1,81)}	

// Cab "Tail"
spriteset(ss_e4_series_tail_yellow_livery,             		    "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_tail_reversed_yellow_livery,    		    "src/gfx/dummy/empty.png")        		{template_dummy(0,0)}
spriteset(ss_e4_series_tail_pink_livery,             		    "src/gfx/dummy/empty.png")     			{template_dummy(0,0)}
spriteset(ss_e4_series_tail_reversed_pink_livery,    		    "src/gfx/dummy/empty.png")        		{template_dummy(0,0)}

// E4 Series Yellow Strip Livery
alternative_sprites(ss_e4_series_tail_yellow_livery,     	    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4y.png")  {template_12_reversed(1,41)}
alternative_sprites(ss_e4_series_tail_reversed_yellow_livery,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4y.png")  {template_12_standard(1,41)}		

// E4 Series Pink Strip Livery
alternative_sprites(ss_e4_series_tail_pink_livery,     		    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4p.png") {template_12_reversed(1,41)}
alternative_sprites(ss_e4_series_tail_reversed_pink_livery,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "src/gfx/e4_series/e4p.png") {template_12_standard(1,41)}


/* PICK THE LIVERY */

// HEAD

switch(FEAT_TRAINS, SELF, sw_e4_series_head_year_dep_livery, build_year) {
    0..2014: ss_e4_series_head_yellow_livery;
    2014..9999: ss_e4_series_head_pink_livery;
    ss_e4_series_head_yellow_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_head_old_livery, cargo_subtype) {
    1: ss_e4_series_head_yellow_livery;
    sw_e4_series_head_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_head_new_livery, cargo_subtype) {
    1: ss_e4_series_head_yellow_livery;
    2: ss_e4_series_head_pink_livery;
    sw_e4_series_head_year_dep_livery;
}

// Head Reversed
/*
switch(FEAT_TRAINS, SELF, sw_e4_series_head_reversed_year_dep_livery, build_year) {
    0..2014: ss_e4_series_head_reversed_yellow_livery;
    2014..9999: ss_e4_series_head_reversed_pink_livery;
    ss_e4_series_head_reversed_yellow_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_head_reversed_old_livery, cargo_subtype) {
    1: ss_e4_series_head_reversed_yellow_livery;
    sw_e4_series_head_reversed_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_head_reversed_new_livery, cargo_subtype) {
    1: ss_e4_series_head_reversed_yellow_livery;
    2: ss_e4_series_head_reversed_pink_livery;
    sw_e4_series_head_reversed_year_dep_livery;
}
*/
// Coach

switch(FEAT_TRAINS, SELF, sw_e4_series_coach_year_dep_livery, build_year) {
    0..2014: ss_e4_series_coach_yellow_livery;
    2014..9999: ss_e4_series_coach_pink_livery;
    ss_e4_series_coach_yellow_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_coach_old_livery, cargo_subtype) {
    1: ss_e4_series_coach_yellow_livery;
    sw_e4_series_coach_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_coach_new_livery, cargo_subtype) {
    1: ss_e4_series_coach_yellow_livery;
    2: ss_e4_series_coach_pink_livery;
    sw_e4_series_coach_year_dep_livery;
}

// Coach Reversed

switch(FEAT_TRAINS, SELF, sw_e4_series_coach_reversed_year_dep_livery, build_year) {
    0..2014: ss_e4_series_coach_reversed_yellow_livery;
    2014..9999: ss_e4_series_coach_reversed_pink_livery;
    ss_e4_series_coach_reversed_yellow_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_coach_reversed_old_livery, cargo_subtype) {
    1: ss_e4_series_coach_reversed_yellow_livery;
    sw_e4_series_coach_reversed_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_coach_reversed_new_livery, cargo_subtype) {
    1: ss_e4_series_coach_reversed_yellow_livery;
    2: ss_e4_series_coach_reversed_pink_livery;
    sw_e4_series_coach_reversed_year_dep_livery;
}

// Panto

switch(FEAT_TRAINS, SELF, sw_e4_series_panto_year_dep_livery, build_year) {
    0..2014: ss_e4_series_panto_yellow_livery;
    2014..9999: ss_e4_series_panto_pink_livery;
    ss_e4_series_panto_yellow_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_panto_old_livery, cargo_subtype) {
    1: ss_e4_series_panto_yellow_livery;
    sw_e4_series_panto_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_panto_new_livery, cargo_subtype) {
    1: ss_e4_series_panto_yellow_livery;
    2: ss_e4_series_panto_pink_livery;
    sw_e4_series_panto_year_dep_livery;
}

// Panto Reversed

switch(FEAT_TRAINS, SELF, sw_e4_series_panto_reversed_year_dep_livery, build_year) {
    0..2014: ss_e4_series_panto_reversed_yellow_livery;
    2014..9999: ss_e4_series_panto_reversed_pink_livery;
    ss_e4_series_panto_reversed_yellow_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_panto_reversed_old_livery, cargo_subtype) {
    1: ss_e4_series_panto_reversed_yellow_livery;
    sw_e4_series_panto_reversed_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_panto_reversed_new_livery, cargo_subtype) {
    1: ss_e4_series_panto_reversed_yellow_livery;
    2: ss_e4_series_panto_reversed_pink_livery;
    sw_e4_series_panto_reversed_year_dep_livery;
}

// Tail

switch(FEAT_TRAINS, SELF, sw_e4_series_tail_year_dep_livery, build_year) {
    0..2014: ss_e4_series_tail_yellow_livery;
    2014..9999: ss_e4_series_tail_pink_livery;
    ss_e4_series_tail_yellow_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_tail_old_livery, cargo_subtype) {
    1: ss_e4_series_tail_yellow_livery;
    sw_e4_series_tail_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_tail_new_livery, cargo_subtype) {
    1: ss_e4_series_tail_yellow_livery;
    2: ss_e4_series_tail_pink_livery;
    sw_e4_series_tail_year_dep_livery;
}

// Tail Reversed
/*
switch(FEAT_TRAINS, SELF, sw_e4_series_tail_reversed_year_dep_livery, build_year) {
    0..2014: ss_e4_series_tail_reversed_yellow_livery;
    2014..9999: ss_e4_series_tail_reversed_pink_livery;
    ss_e4_series_tail_reversed_yellow_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_tail_reversed_old_livery, cargo_subtype) {
    1: ss_e4_series_tail_reversed_yellow_livery;
    sw_e4_series_tail_reversed_year_dep_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_tail_reversed_new_livery, cargo_subtype) {
    1: ss_e4_series_tail_reversed_yellow_livery;
    2: ss_e4_series_tail_reversed_pink_livery;
    sw_e4_series_tail_reversed_year_dep_livery;
}
*/
// Pre 2014 subtype text
switch(FEAT_TRAINS, SELF, sw_e4_series_old_livery_subtype_text, cargo_subtype) {
    0: return string(LV_YEAR_DEP_LIVERY);
	1: return string(LV_E4_SERIES_YELLOW); 
       return CB_RESULT_NO_TEXT;
    }

// Post 2014 subtype text
switch(FEAT_TRAINS, SELF, sw_e4_series_new_livery_subtype_text, cargo_subtype) {
    0: return string(LV_YEAR_DEP_LIVERY);
	1: return string(LV_E4_SERIES_YELLOW);
    2: return string(LV_E4_SERIES_PINK);
       return CB_RESULT_NO_TEXT;
    }

switch(FEAT_TRAINS, SELF, sw_e4_series_year_dep_purchase, current_year) {
    0..2014: ss_e4_series_buy_yellow_livery;
    ss_e4_series_buy_pink_livery;
}

switch(FEAT_TRAINS, SELF, sw_e4_series_year_dep_subtype_text, current_year) {
    0..2014: sw_e4_series_old_livery_subtype_text;
    sw_e4_series_new_livery_subtype_text;
}

// Head
switch(FEAT_TRAINS, SELF, ss_e4_series_head, current_year) {
    0..2014: sw_e4_series_head_old_livery;
    sw_e4_series_head_new_livery;
}

// Head Reversed
/*
switch(FEAT_TRAINS, SELF, ss_e4_series_head_reversed, current_year) {
    0..2014: sw_e4_series_head_reversed_old_livery;
    sw_e4_series_head_reversed_new_livery;
}
*/
// Coach
switch(FEAT_TRAINS, SELF, ss_e4_series_coach, current_year) {
    0..2014: sw_e4_series_coach_old_livery;
    sw_e4_series_coach_new_livery;
}

// Coach Reversed
switch(FEAT_TRAINS, SELF, ss_e4_series_coach_reversed, current_year) {
    0..2014: sw_e4_series_coach_reversed_old_livery;
    sw_e4_series_coach_reversed_new_livery;
}

// Panto
switch(FEAT_TRAINS, SELF, ss_e4_series_panto, current_year) {
    0..2014: sw_e4_series_panto_old_livery;
    sw_e4_series_panto_new_livery;
}

// Panto Reversed
switch(FEAT_TRAINS, SELF, ss_e4_series_panto_reversed, current_year) {
    0..2014: sw_e4_series_panto_reversed_old_livery;
    sw_e4_series_panto_reversed_new_livery;
}

// Tail
switch(FEAT_TRAINS, SELF, ss_e4_series_tail, current_year) {
    0..2014: sw_e4_series_tail_old_livery;
    sw_e4_series_tail_new_livery;
}

// Tail Reversed
/*
switch(FEAT_TRAINS, SELF, ss_e4_series_tail_reversed, current_year) {
    0..2014: sw_e4_series_tail_reversed_old_livery;
    sw_e4_series_tail_reversed_new_livery;
}
*/
/* COACHES 
  Repeating 4 switches to create a;
1) Coach Car going forwards and a Panto Car going backwards
2) Coach Car going forwards and a Coach Car going backwards
3) Panto Car going forwards and a Coach Car going backwards
4) Panto Car going forwards and a Panto Car going backwards

   1) check reversed */ 
switch (FEAT_TRAINS, PARENT, sw_e4_series_reverser_C_P, vehicle_is_reversed) {
	0: ss_e4_series_coach;
	ss_e4_series_panto_reversed;
}

/* 2) check reversed */ 

switch (FEAT_TRAINS, PARENT, sw_e4_series_reverser_C_C, vehicle_is_reversed) {
	0: ss_e4_series_coach;
	ss_e4_series_coach_reversed;
}


/* 3) check reversed */ 
switch (FEAT_TRAINS, PARENT, sw_e4_series_reverser_P_C, vehicle_is_reversed) {
	0: ss_e4_series_panto;
	ss_e4_series_coach_reversed;
}

/* 4) check reversed */ 
/*
switch (FEAT_TRAINS, PARENT, sw_e4_series_reverser_P_P, vehicle_is_reversed) {
	0: ss_e4_series_panto;
	ss_e4_series_panto_reversed;
}
*/
/* LENGTH*/

/* Make the Middle long sprite length 8 and the dummy sprites length 2*/
switch (FEAT_TRAINS, SELF, sw_e4_series_length, position_in_consist%3) {
    1: return 8;
    return 2;
}

/* PUT TOGETHER THE EMU*/

/* Select the correct part of the train */
switch (FEAT_TRAINS, SELF, sw_e4_series_graphics, position_in_articulated_veh) {
	// Car 1
    0:  dummy_sprites; 					
	1:  ss_e4_series_head; 					
	2:  dummy_sprites;
    // Car 2					
	3:  dummy_sprites; 					
	4:  sw_e4_series_reverser_C_C;					
	5:  dummy_sprites;
    // Car 3					
	6:  dummy_sprites;					
	7:  sw_e4_series_reverser_C_P;
	8:  dummy_sprites;
    // Car 4
	9:  dummy_sprites;
	10: sw_e4_series_reverser_P_C;
	11: dummy_sprites;
    // Car 5
    12: dummy_sprites;
    13: sw_e4_series_reverser_C_P;
    14: dummy_sprites;
    // Car 6
    15: dummy_sprites;
    16: sw_e4_series_reverser_P_C;
    17: dummy_sprites;
    // Car 7
    18: dummy_sprites;
    19: sw_e4_series_reverser_C_C;
    20: dummy_sprites;
    // Car 8
    21: dummy_sprites;
	22: ss_e4_series_tail;
	23: dummy_sprites;
}

/* Assemble an 8-car articulated vehicle. */
switch (FEAT_TRAINS, SELF, sw_e4_series_articulated_part, extra_callback_info1) {
	1 .. 23: return series_e4;										// Should be same as range above
	return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch (FEAT_TRAINS, SELF, sw_e4_series_visual_effect_and_powered, ((position_in_articulated_veh == 0) && !func_is_reversed()) || ((position_in_articulated_veh_from_end == 0) && func_is_reversed()) ) {
	1: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 0, ENABLE_WAGON_POWER);
	return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}

item(FEAT_TRAINS, series_e4, 2004) {
	property {
		name: 							string(STR_NAME_E4_SERIES);
		climates_available:             ALL_CLIMATES;
		introduction_date:              date(1997,12,20);
		model_life:                     VEHICLE_NEVER_EXPIRES;		//
		vehicle_life:                   30;							// 
		reliability_decay:              5;
		refittable_cargo_classes:       bitmask(CC_PASSENGERS);
		refit_cost:                     0;
		default_cargo_type:             PASS;
		cargo_capacity:                 1;							// 
		loading_speed:                  50;							
		cargo_age_period:               278; 						// 1.5 times normal for this expensive long-distance train
		sprite_id:                      SPRITE_ID_NEW_TRAIN; 		// required to enable new graphics
		speed:                          241 km/h;				// Operational Top Speed
		misc_flags:                     bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_TILT, TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		track_type:                     SHINKANSEN;
		ai_special_flag:                AI_FLAG_PASSENGER;
		running_cost_base:              RUNNING_COST_STEAM;
		engine_class:                   ENGINE_CLASS_ELECTRIC;
		power:                          8050 kW;					// Agreed to Wikipedia
		weight:                         302 tons;					// Agreed to Wikipedia 
		tractive_effort_coefficient:    0.3;

	}
	graphics {
		default:                        sw_e4_series_graphics;
		purchase:                       sw_e4_series_year_dep_purchase;
		articulated_part:               sw_e4_series_articulated_part;
		length:                         sw_e4_series_length;
		cargo_capacity:                 50;
		//colour_mapping:                 sw_cc_blue_white;s
		cargo_subtype_text:             sw_e4_series_year_dep_subtype_text;
		cost_factor:                    257;
		running_cost_factor:            func_running_costs(300);
		purchase_running_cost_factor:   300;
		visual_effect_and_powered:      sw_e4_series_visual_effect_and_powered;
		additional_text:                string(STR_DESC_E4_SERIES);
	}
}

/* End e4 series */

/* Begin e5 Series */

/* SPRITES */

/* Purchase Menu */
spriteset (ss_e5_series_purchase_pink_livery,	        	"src/gfx/dummy/purchase.png") {template_purchase(0, 0)}
spriteset (ss_e5_series_purchase_purple_livery,	        	"src/gfx/dummy/purchase.png") {template_purchase(0, 0)}

alternative_sprites(ss_e5_series_purchase_pink_livery,     	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/e5_series/purchase_32bpp.png") {template_purchase(0, 0)}
alternative_sprites(ss_e5_series_purchase_purple_livery,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/e5_series/purchase_32bpp.png") {template_purchase(0, 0)}

/* EMU Parts */

/* Cab "Head" */
spriteset(ss_e5_series_head_pink_livery,             		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_e5_series_head_reversed_pink_livery,    		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_e5_series_head_purple_livery,             		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_e5_series_head_reversed_purple_livery,    		"src/gfx/dummy/empty.png") {template_dummy(0,0)}

// E5 Series Pink Strip Livery
alternative_sprites(ss_e5_series_head_pink_livery,     		ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/e5_series/e5pink.png")  {template_12_standard(1,1)}
alternative_sprites(ss_e5_series_head_reversed_pink_livery, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/e5_series/e5pink.png")  {template_12_reversed(1,1)}		

// E5 Series Purple Strip Livery
alternative_sprites(ss_e5_series_head_purple_livery,     	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,  "src/gfx/e5_series/h5purple.png") {template_12_standard(1,1)}
alternative_sprites(ss_e5_series_head_reversed_purple_livery,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/e5_series/h5purple.png") {template_12_reversed(1,1)}	

// Coach
spriteset(ss_e5_series_coach_pink_livery,             		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_e5_series_coach_reversed_pink_livery,    		"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_e5_series_coach_purple_livery,             	"src/gfx/dummy/empty.png") {template_dummy(0,0)}
spriteset(ss_e5_series_coach_reversed_purple_livery,    	"src/gfx/dummy/empty.png") {template_dummy(0,0)}

// E5 Series Pink Strip Livery
alternative_sprites(ss_e5_series_coach_pink_livery,     	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/e5_series/e5pink.png") {template_12_standard(1,121)}
alternative_sprites(ss_e5_series_coach_reversed_pink_livery,ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/gfx/e5_series/e5pink.png") {template_12_reversed(1,121)}

// E5 Series Purple Strip Livery
alternative_sprites(ss_e5_series_coach_purple_livery,     		
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/h5purple.png")     	 			    {template_12_standard(1,121)}
alternative_sprites(ss_e5_series_coach_reversed_purple_livery,  
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/h5purple.png")      				    {template_12_reversed(1,121)}	

// Coach Panto
spriteset(ss_e5_series_panto_pink_livery,          		"src/gfx/dummy/empty.png")     						{template_dummy(0,0)}
spriteset(ss_e5_series_panto_reversed_pink_livery, 		"src/gfx/dummy/empty.png")     						{template_dummy(0,0)}
spriteset(ss_e5_series_panto_purple_livery,          		    "src/gfx/dummy/empty.png")     						{template_dummy(0,0)}
spriteset(ss_e5_series_panto_reversed_purple_livery, 		    "src/gfx/dummy/empty.png")     						{template_dummy(0,0)}

// E4 Series pink Strip Livery
alternative_sprites(ss_e5_series_panto_pink_livery,     		
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/e5pink.png")     	 			    {template_12_standard(1,81)}
alternative_sprites(ss_e5_series_panto_reversed_pink_livery,  
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/e5pink.png")      			        {template_12_reversed(1,81)}	

// E4 Series purple Strip Livery
alternative_sprites(ss_e5_series_panto_purple_livery,     		
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/h5purple.png")     	 			    {template_12_standard(1,81)}
alternative_sprites(ss_e5_series_panto_reversed_purple_livery,  
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/h5purple.png")      			        {template_12_reversed(1,81)}	

// Cab "Tail"
spriteset(ss_e5_series_tail_pink_livery,             		"src/gfx/dummy/empty.png")     						{template_dummy(0,0)}
spriteset(ss_e5_series_tail_reversed_pink_livery,    		"src/gfx/dummy/empty.png")        					{template_dummy(0,0)}
spriteset(ss_e5_series_tail_purple_livery,             		"src/gfx/dummy/empty.png")     						{template_dummy(0,0)}
spriteset(ss_e5_series_tail_reversed_purple_livery,    		"src/gfx/dummy/empty.png")        					{template_dummy(0,0)}

// E4 Series pink Strip Livery
alternative_sprites(ss_e5_series_tail_pink_livery,     		
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/e5pink.png")     	 			    {template_12_reversed(1,41)}
alternative_sprites(ss_e5_series_tail_reversed_pink_livery,  
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/e5pink.png")      				    {template_12_standard(1,41)}		

// E4 Series purple Strip Livery
alternative_sprites(ss_e5_series_tail_purple_livery,     		
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/h5purple.png")     	 			    {template_12_reversed(1,41)}
alternative_sprites(ss_e5_series_tail_reversed_purple_livery,  
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			            "src/gfx/e5_series/h5purple.png")      				    {template_12_standard(1,41)}

/* PICK THE LIVERY */

// HEAD

switch(FEAT_TRAINS, SELF, sw_e5_series_head_new_livery, cargo_subtype) {
    1: ss_e5_series_head_purple_livery;
    ss_e5_series_head_pink_livery;
}

switch(FEAT_TRAINS, SELF, ss_e5_series_head, current_year) {
    0..2016: ss_e5_series_head_pink_livery;
    sw_e5_series_head_new_livery;
}

// COACH

switch(FEAT_TRAINS, SELF, sw_e5_series_coach_new_livery, cargo_subtype) {
    1: ss_e5_series_coach_purple_livery;
    ss_e5_series_coach_pink_livery;
}

switch(FEAT_TRAINS, SELF, ss_e5_series_coach, current_year) {
    0..2016: ss_e5_series_coach_pink_livery;
    sw_e5_series_coach_new_livery;
}

// Coach Reversed

switch(FEAT_TRAINS, SELF, sw_e5_series_coach_reversed_new_livery, cargo_subtype) {
    1: ss_e5_series_coach_reversed_purple_livery;
    ss_e5_series_coach_reversed_pink_livery;
}

switch(FEAT_TRAINS, SELF, ss_e5_series_coach_reversed, current_year) {
    0..2016: ss_e5_series_coach_reversed_pink_livery;
    sw_e5_series_coach_reversed_new_livery;
}

// Panto

switch(FEAT_TRAINS, SELF, sw_e5_series_panto_new_livery, cargo_subtype) { 
    1: ss_e5_series_panto_purple_livery;
    ss_e5_series_panto_pink_livery;
}

switch(FEAT_TRAINS, SELF, ss_e5_series_panto, current_year) {
    0..2016: ss_e5_series_panto_pink_livery;
    sw_e5_series_panto_new_livery;
}

// PANTO REVERSED

switch(FEAT_TRAINS, SELF, sw_e5_series_panto_reversed_new_livery, cargo_subtype) {
    1: ss_e5_series_panto_reversed_purple_livery;
    ss_e5_series_panto_reversed_pink_livery;
}

switch(FEAT_TRAINS, SELF, ss_e5_series_panto_reversed, current_year) {
    0..2016: ss_e5_series_panto_reversed_pink_livery;
    sw_e5_series_panto_reversed_new_livery;
}

// TAIL

switch(FEAT_TRAINS, SELF, sw_e5_series_tail_new_livery, cargo_subtype) {
    1: ss_e5_series_tail_purple_livery;
    ss_e5_series_tail_pink_livery;
}

switch(FEAT_TRAINS, SELF, ss_e5_series_tail, current_year) {
    0..2016: ss_e5_series_tail_pink_livery;
    sw_e5_series_tail_new_livery;
}

// Pre 2016 subtype text
switch(FEAT_TRAINS, SELF, sw_e5_series_old_livery_subtype_text, cargo_subtype) {
	0: return string(LV_E5_SERIES_E5); 
       return CB_RESULT_NO_TEXT;
    }

// Post 2016 subtype text
switch(FEAT_TRAINS, SELF, sw_e5_series_new_livery_subtype_text, cargo_subtype) {
	0: return string(LV_E5_SERIES_E5);
    1: return string(LV_E5_SERIES_H5);
       return CB_RESULT_NO_TEXT;
    }

/*
switch(FEAT_TRAINS, SELF, sw_e5_series_year_dep_purchase, current_year) {
    0..2016: ss_e5_series_purchase_pink_livery;
    ss_e5_series_purchase_purple_livery;
}
*/
switch(FEAT_TRAINS, SELF, sw_e5_series_year_dep_subtype_text, current_year) {
    0..2016: sw_e5_series_old_livery_subtype_text;
    sw_e5_series_new_livery_subtype_text;
}

/* Switches to set which sprite to show going forwards vs going backwards */

// Coach Car going forwards and a Panto Car going backwards
switch (FEAT_TRAINS, PARENT, sw_e5_series_reverser_C_P, vehicle_is_reversed) {
	0: ss_e5_series_coach;
	ss_e5_series_panto_reversed;
}

// Coach Car going forwards and a Coach Car going backwards
switch (FEAT_TRAINS, PARENT, sw_e5_series_reverser_C_C, vehicle_is_reversed) {
	0: ss_e5_series_coach;
	ss_e5_series_coach_reversed;
}

// Panto Car going forwards and a Coach Car going backwards
switch (FEAT_TRAINS, PARENT, sw_e5_series_reverser_P_C, vehicle_is_reversed) {
	0: ss_e5_series_panto;
	ss_e5_series_coach_reversed;
}

// Panto Car going forwards and a Panto Car going backwards
/*
switch (FEAT_TRAINS, PARENT, sw_e5_series_reverser_P_P, vehicle_is_reversed) {
	0: ss_e5_series_panto;
	ss_e5_series_panto_reversed;
}
*/
/* LENGTH*/

/* Make the Middle long sprite length 8 and the dummy sprites length 2*/
switch (FEAT_TRAINS, SELF, sw_e5_series_length, position_in_consist%3) {
    1: return 8;
    return 2;
}

/* PUT TOGETHER THE EMU*/

/* Select the correct part of the train */
switch (FEAT_TRAINS, SELF, sw_e5_series_graphics, position_in_articulated_veh) {
	// Car 1
    0:  dummy_sprites; 					
	1:  ss_e5_series_head; 					
	2:  dummy_sprites;
    // Car 2					
	3:  dummy_sprites; 					
	4:  sw_e5_series_reverser_C_C;					
	5:  dummy_sprites;
    // Car 3					
	6:  dummy_sprites;					
	7:  sw_e5_series_reverser_P_C;
	8:  dummy_sprites;
    // Car 4
	9:  dummy_sprites;
	10: sw_e5_series_reverser_C_P;
	11: dummy_sprites;
    // Car 5
    12: dummy_sprites;
    13: sw_e5_series_reverser_C_C;
    14: dummy_sprites;
    // Car 6
    15: dummy_sprites;
    16: sw_e5_series_reverser_C_C;
    17: dummy_sprites;
    // Car 7
    18: dummy_sprites;
    19: sw_e5_series_reverser_P_C;
    20: dummy_sprites;
    // Car 8
    21: dummy_sprites;
	22: sw_e5_series_reverser_C_P;
	23: dummy_sprites;
    // Car 9
    24: dummy_sprites;
    25: sw_e5_series_reverser_C_C;
    26: dummy_sprites;
    // Car 10
    27: dummy_sprites;
	28: ss_e5_series_tail;
	29: dummy_sprites;
}

/* Assemble an 10-car articulated vehicle. */
switch (FEAT_TRAINS, SELF, sw_e5_series_articulated_part, extra_callback_info1) {
	1 .. 29: return series_e5;										// Should be same as range above
	return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch (FEAT_TRAINS, SELF, sw_e5_series_visual_effect_and_powered, ((position_in_articulated_veh == 0) && !func_is_reversed()) || ((position_in_articulated_veh_from_end == 0) && func_is_reversed()) ) {
	1: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 0, ENABLE_WAGON_POWER);
	return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}

item(FEAT_TRAINS, series_e5, 2005) {
	property {
		name: 							string(STR_NAME_E5_SERIES);
		climates_available:             ALL_CLIMATES;
		introduction_date:              date(2011,03,05); 
		model_life:                     VEHICLE_NEVER_EXPIRES;		//
		vehicle_life:                   30;							// 
		reliability_decay:              5;
		refittable_cargo_classes:       bitmask(CC_PASSENGERS);
		refit_cost:                     0;
		default_cargo_type:             PASS;
		cargo_capacity:                 1;							// 
		loading_speed:                  50;							
		cargo_age_period:               278; 						// 1.5 times normal for this expensive long-distance train
		sprite_id:                      SPRITE_ID_NEW_TRAIN; 		// required to enable new graphics
		speed:                          321 km/h;				// Operational Top Speed
		misc_flags:                     bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_TILT, TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		track_type:                     SHINKANSEN;
		ai_special_flag:                AI_FLAG_PASSENGER;
		running_cost_base:              RUNNING_COST_STEAM;
		engine_class:                   ENGINE_CLASS_ELECTRIC;
		power:                          8050 kW;					// Agreed to Wikipedia
		weight:                         302 tons;					// Agreed to Wikipedia 
		tractive_effort_coefficient:    0.3;

	}
	graphics {
		default:                        sw_e5_series_graphics;
		purchase:                       ss_e5_series_purchase_pink_livery;
		articulated_part:               sw_e5_series_articulated_part;
		length:                         sw_e5_series_length;
		cargo_capacity:                 50;
		//colour_mapping:                 sw_cc_blue_white;s
		cargo_subtype_text:             sw_e5_series_year_dep_subtype_text;
		cost_factor:                    257;
		running_cost_factor:            func_running_costs(300);
		purchase_running_cost_factor:   300;
		visual_effect_and_powered:      sw_e5_series_visual_effect_and_powered;
		additional_text:                string(STR_DESC_E5_SERIES);
	}
}

/* End e5 series */

// Begin e6_series

// Purchase Sprites
spriteset (spriteset_e6_series_purchase,	        	"src/gfx/dummy/purchase.png")               		{tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_e6_series_purchase,     		
	ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     			"src/gfx/e6_series/purchase_32bpp.png")     	 	{tmpl_purchase_dh_32bpp(0, 0)}
    
// Vehicel Sprites
spriteset(spriteset_e6_series_front_std,                    "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_back_std,                     "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_mid_std,                      "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_mid_panto_std,                "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_back_panto_std,               "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

spriteset(spriteset_e6_series_rev_front_std,                "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_rev_back_std,                 "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_rev_mid_std,                  "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_rev_mid_panto_std,            "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_rev_back_panto_std,           "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

spriteset(spriteset_e6_series_revflip_front_std,            "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_revflip_back_std,             "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_revflip_mid_std,              "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_revflip_mid_panto_std,        "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}
spriteset(spriteset_e6_series_revflip_back_panto_std,       "src/gfx/dummy/mucar.png")                  {template_8_standard(1,1)}

alternative_sprites(spriteset_e6_series_front_std,          // Front std
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e6_series_back_std,           // Back rev
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,41)}
alternative_sprites(spriteset_e6_series_mid_std,            // Coach
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,201)}
alternative_sprites(spriteset_e6_series_mid_panto_std,      // Panto rev
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,161)}
alternative_sprites(spriteset_e6_series_back_panto_std,     // Back Panto rev
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,121)}

alternative_sprites(spriteset_e6_series_rev_front_std,      // Back rev 
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,41)}
alternative_sprites(spriteset_e6_series_rev_back_std,       // Front rev
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e6_series_rev_mid_std,        // Coach
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,201)}
alternative_sprites(spriteset_e6_series_rev_mid_panto_std,  // Panto     
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,161)}
alternative_sprites(spriteset_e6_series_rev_back_panto_std, // Front Panto rev     
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1, 81)}

alternative_sprites(spriteset_e6_series_revflip_front_std,  // Back         
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_reversed(1,41)}
alternative_sprites(spriteset_e6_series_revflip_back_std,   // Front    
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1,1)}
alternative_sprites(spriteset_e6_series_revflip_mid_std,    // Coach rev     
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_reversed(1,201)}
alternative_sprites(spriteset_e6_series_revflip_mid_panto_std,     // Panto  
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_reversed(1,161)}
alternative_sprites(spriteset_e6_series_revflip_back_panto_std,    // Front Panto   
    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,                     "src/gfx/e6_series/e6.png")                 {template_8_standard(1, 81)}

/*---END OF SECTION---*/
/*---GFX: Train Reversing Switches---*/
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_rev_front_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_revflip_front_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_rev_back_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_revflip_back_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_rev_mid_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_revflip_mid_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_rev_mid_panto_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_revflip_mid_panto_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_rev_back_panto_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : spriteset_e6_series_revflip_back_panto_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1 : sw_e6_series_gfx_rev_front_livery;
  default : sw_e6_series_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1 : sw_e6_series_gfx_rev_back_livery;
  default : sw_e6_series_gfx_revflip_back_livery;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1 : sw_e6_series_gfx_rev_mid_livery;
  default : sw_e6_series_gfx_revflip_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1 : sw_e6_series_gfx_rev_mid_panto_livery;
  default : sw_e6_series_gfx_revflip_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1 : sw_e6_series_gfx_rev_back_panto_livery;
  default : sw_e6_series_gfx_revflip_back_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_pantograph_pos_std_sw1, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
 0 : sw_e6_series_gfx_rev_mid_panto_flippedcheck;
 default : sw_e6_series_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_pantograph_pos_std_sw2, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){
 1 : sw_e6_series_gfx_rev_mid_panto_flippedcheck;
 4 : sw_e6_series_gfx_rev_mid_panto_flippedcheck;
 7 : sw_e6_series_gfx_rev_mid_panto_flippedcheck;
 default : sw_e6_series_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_pantograph_pos_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 06, 0x000000FF, 0x41]]){
  0..1 : sw_e6_series_gfx_rev_pantograph_pos_std_sw1;
  default : sw_e6_series_gfx_rev_pantograph_pos_std_sw2;
}
switch(FEAT_TRAINS,SELF, sw_e6_series_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0 : sw_e6_series_gfx_rev_pantograph_pos_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
 0 : sw_e6_series_gfx_rev_back_flippedcheck;
 default : sw_e6_series_gfx_rev_back_panto_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_frontback_nomucars,
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){
 1 : sw_e6_series_gfx_rev_front_flippedcheck;
 0 : sw_e6_series_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_frontback_aftermucars,
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){
 1 : sw_e6_series_gfx_rev_back_pantocheck;
 0 : sw_e6_series_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_frontback_mucarcheck,
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),
var[0x61, 0, 0x0000FFFF, 0xC6]]){
 1000 : sw_e6_series_gfx_rev_frontback_aftermucars;
 default : sw_e6_series_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_frontback_sameid,
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
 2006 : sw_e6_series_gfx_rev_frontback_mucarcheck;
 1000 : sw_e6_series_gfx_rev_front_flippedcheck;
 default : sw_e6_series_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_frontback,
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
 2006 : sw_e6_series_gfx_rev_frontback_sameid;
 1000 : sw_e6_series_gfx_rev_back_pantocheck;
 default : sw_e6_series_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
 1000 : sw_e6_series_gfx_rev_pantograph_pos;
 2006 : sw_e6_series_gfx_rev_frontback;
}
/*---END OF SECTION---*/
/*---GFX: Pantograph Positions---*/
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_pantograph_pos_std_sw1, position_in_vehid_chain){
 0 : spriteset_e6_series_mid_panto_std;
 default : spriteset_e6_series_mid_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_pantograph_pos_std_sw2, position_in_vehid_chain%10){
 1 : spriteset_e6_series_mid_panto_std;
 4 : spriteset_e6_series_mid_panto_std;
 7 : spriteset_e6_series_mid_panto_std;
 default : spriteset_e6_series_mid_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_pantograph_pos_std, num_vehs_in_vehid_chain){
  0..1 : sw_e6_series_gfx_pantograph_pos_std_sw1;
  default : sw_e6_series_gfx_pantograph_pos_std_sw2;
}
/*---END OF SECTION---*/
/*---GFX: Front/Back Cab Car Switches---*/
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_pantocheck_std, position_in_vehid_chain){
 0: spriteset_e6_series_back_std;
default: spriteset_e6_series_back_panto_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_frontback_flipcheck_std, vehicle_is_flipped){
 0: spriteset_e6_series_front_std;
 default: sw_e6_series_gfx_pantocheck_std;
}
switch(FEAT_TRAINS, PARENT, sw_e6_series_gfx_frontback_std, vehicle_is_reversed){
 0: sw_e6_series_gfx_frontback_flipcheck_std;
 default: sw_e6_series_gfx_rev_idcheck;
}
/*---END OF SECTION---*/
/*---GFX: Middle Car Switches---*/
switch(FEAT_TRAINS, PARENT, sw_e6_series_gfx_mucar_revcheck_mid_std, vehicle_is_reversed){
 0: sw_e6_series_gfx_pantograph_pos_std;
 default: sw_e6_series_gfx_rev_idcheck;
}
/*---END OF SECTION---*/
/*---GFX: Livery Refitting Switches---*/
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_mucar,  cargo_subtype) {
0 : sw_e6_series_gfx_mucar_revcheck_mid_std;
}
switch(FEAT_TRAINS, SELF, sw_e6_series_gfx_main,  cargo_subtype) {
0 : sw_e6_series_gfx_frontback_std;
}
/*---END OF SECTION---*/
/*---GFX: Livery Menu Switches---*/
// switch(FEAT_TRAINS, SELF, sw_e6_series_subtypetext_mucar, cargo_subtype) {
//0 : string(emu_e6_series_LV_std);
//}
// switch(FEAT_TRAINS, SELF, sw_e6_series_subtypetext_main, cargo_subtype) {
//0 : string(emu_e6_series_LV_std);
//}
/*---END OF SECTION---*/
/*---Coupling Switch---*/
switch(FEAT_TRAINS, SELF, sw_e6_series_attach_vehid, [vehicle_type_id == series_e6 || vehicle_type_id == mu_car]) {
 0: return string(MU_UNIQUE);
}
/*---END OF SECTION---*/


item(FEAT_TRAINS, series_e6, 2006) {
    property {
        name:                           string(STR_NAME_E6_SERIES);
        introduction_date:              date(2013,03,16);
        model_life:                     VEHICLE_NEVER_EXPIRES;
        vehicle_life:                   24;
        reliability_decay:              23;

        cargo_capacity:                 param_capacity_fifty;
        loading_speed:                  param_loading_4D;
        cost_factor:                    17;
        running_cost_factor:            51;

        speed:                          321 km/h;
        track_type:                     MINI_SHINKANSEN;
        power:                          2000 kW;
        weight:                         42 ton;

        climates_available:             ALL_CLIMATES;
        ai_special_flag:                AI_FLAG_PASSENGER;
        sprite_id:                      SPRITE_ID_NEW_TRAIN;
        misc_flags:                     bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:       bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes:   bitmask();
        refit_cost:                     0;
        dual_headed:                    1;
        ai_engine_rank:                 0;

        running_cost_base:              RUNNING_COST_ELECTRIC;
        engine_class:                   ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:      visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:    0.3;
        air_drag_coefficient:           0.07;
        bitmask_vehicle_info:           0;
        length:                         8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                        sw_e6_series_gfx_main;
		    purchase:                       spriteset_e6_series_purchase;
		    additional_text:	              return string(STR_DESC_E6_SERIES);
        //cargo_subtype_text:           sw_e6_series_subtypetext_main;
        can_attach_wagon:			          sw_e6_series_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                        sw_e6_series_gfx_mucar;
        cargo_capacity:                 param_capacity_fifty;
        loading_speed:                  param_loading_4D;
        //cargo_subtype_text:           sw_e6_series_subtypetext_mucar;
        power:                          1140;
        weight:                         42;
      }

}

// End e6_series
