
/* cab02 */

// Sprites

	// Base

	// 10/8
	spriteset(ss_std_200_series_cab02f_sha, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_sharknose.png") {tmpl_10_cab_std(1,51)}
	spriteset(ss_std_200_series_cab02b_sha, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_sharknose.png") {tmpl_10_cab_rev(1,1)}

	// Front
	spriteset(ss_frt_200_series_cab02f_sha, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_sharknose.png") {tmpl_cab_frt_std(1,51)}
	spriteset(ss_frt_200_series_cab02b_sha, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_sharknose.png") {tmpl_cab_frt_rev(1,1)}
	// Mid
	spriteset(ss_mid_200_series_cab02f_sha, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_sharknose.png") {tmpl_cab_mid_std(1,51)}
	spriteset(ss_mid_200_series_cab02b_sha, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_sharknose.png") {tmpl_cab_mid_rev(1,1)}
	// Back
	spriteset(ss_bck_200_series_cab02f_sha, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_sharknose.png") {tmpl_cab_bck_std(1,51)}
	spriteset(ss_bck_200_series_cab02b_sha, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_sharknose.png") {tmpl_cab_bck_rev(1,1)}

	// Sharknose 2cc Mask

	// 10/8
	spriteset(ss_std_200_series_cab02f_sh2, "src/trains/200_series/gfx/200_series_sharknose_2cc.png") {tmpl_10_cab_std(1,51)}
	spriteset(ss_std_200_series_cab02b_sh2, "src/trains/200_series/gfx/200_series_sharknose_2cc.png") {tmpl_10_cab_rev(1,1)}

	// Front
	spriteset(ss_frt_200_series_cab02f_sh2, "src/trains/200_series/gfx/200_series_sharknose_2cc.png") {tmpl_cab_frt_std(1,51)}
	spriteset(ss_frt_200_series_cab02b_sh2, "src/trains/200_series/gfx/200_series_sharknose_2cc.png") {tmpl_cab_frt_rev(1,1)}
	// Mid
	spriteset(ss_mid_200_series_cab02f_sh2, "src/trains/200_series/gfx/200_series_sharknose_2cc.png") {tmpl_cab_mid_std(1,51)}
	spriteset(ss_mid_200_series_cab02b_sh2, "src/trains/200_series/gfx/200_series_sharknose_2cc.png") {tmpl_cab_mid_rev(1,1)}
	// Back
	spriteset(ss_bck_200_series_cab02f_sh2, "src/trains/200_series/gfx/200_series_sharknose_2cc.png") {tmpl_cab_bck_std(1,51)}
	spriteset(ss_bck_200_series_cab02b_sh2, "src/trains/200_series/gfx/200_series_sharknose_2cc.png") {tmpl_cab_bck_rev(1,1)}

    // Roundnose

    // 10/8
	spriteset(ss_std_200_series_cab02f_rnd, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_roundnose.png") {tmpl_10_cab_std(1,51)}
	spriteset(ss_std_200_series_cab02b_rnd, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_roundnose.png") {tmpl_10_cab_rev(1,1)}

	// Front
	spriteset(ss_frt_200_series_cab02f_rnd, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_roundnose.png") {tmpl_cab_frt_std(1,51)}
	spriteset(ss_frt_200_series_cab02b_rnd, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_roundnose.png") {tmpl_cab_frt_rev(1,1)}
	// Mid
	spriteset(ss_mid_200_series_cab02f_rnd, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_roundnose.png") {tmpl_cab_mid_std(1,51)}
	spriteset(ss_mid_200_series_cab02b_rnd, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_roundnose.png") {tmpl_cab_mid_rev(1,1)}
	// Back
	spriteset(ss_bck_200_series_cab02f_rnd, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_roundnose.png") {tmpl_cab_bck_std(1,51)}
	spriteset(ss_bck_200_series_cab02b_rnd, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_roundnose.png") {tmpl_cab_bck_rev(1,1)}

    // Roundnose 2cc Mask

	// 10/8
	spriteset(ss_std_200_series_cab02f_rn2, "src/trains/200_series/gfx/200_series_roundnose_2cc.png") {tmpl_10_cab_std(1,51)}
	spriteset(ss_std_200_series_cab02b_rn2, "src/trains/200_series/gfx/200_series_roundnose_2cc.png") {tmpl_10_cab_rev(1,1)}

	// Front
	spriteset(ss_frt_200_series_cab02f_rn2, "src/trains/200_series/gfx/200_series_roundnose_2cc.png") {tmpl_cab_frt_std(1,51)}
	spriteset(ss_frt_200_series_cab02b_rn2, "src/trains/200_series/gfx/200_series_roundnose_2cc.png") {tmpl_cab_frt_rev(1,1)}
	// Mid
	spriteset(ss_mid_200_series_cab02f_rn2, "src/trains/200_series/gfx/200_series_roundnose_2cc.png") {tmpl_cab_mid_std(1,51)}
	spriteset(ss_mid_200_series_cab02b_rn2, "src/trains/200_series/gfx/200_series_roundnose_2cc.png") {tmpl_cab_mid_rev(1,1)}
	// Back
	spriteset(ss_bck_200_series_cab02f_rn2, "src/trains/200_series/gfx/200_series_roundnose_2cc.png") {tmpl_cab_bck_std(1,51)}
	spriteset(ss_bck_200_series_cab02b_rn2, "src/trains/200_series/gfx/200_series_roundnose_2cc.png") {tmpl_cab_bck_rev(1,1)}

    // Refurb

    // 10/8
	spriteset(ss_std_200_series_cab02f_rfb, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_refurb.png") {tmpl_10_cab_std(1,51)}
	spriteset(ss_std_200_series_cab02b_rfb, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_refurb.png") {tmpl_10_cab_rev(1,1)}

	// Front
	spriteset(ss_frt_200_series_cab02f_rfb, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_refurb.png") {tmpl_cab_frt_std(1,51)}
	spriteset(ss_frt_200_series_cab02b_rfb, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_refurb.png") {tmpl_cab_frt_rev(1,1)}
	// Mid
	spriteset(ss_mid_200_series_cab02f_rfb, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_refurb.png") {tmpl_cab_mid_std(1,51)}
	spriteset(ss_mid_200_series_cab02b_rfb, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_refurb.png") {tmpl_cab_mid_rev(1,1)}
	// Back
	spriteset(ss_bck_200_series_cab02f_rfb, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_refurb.png") {tmpl_cab_bck_std(1,51)}
	spriteset(ss_bck_200_series_cab02b_rfb, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "src/trains/200_series/gfx/200_series_refurb.png") {tmpl_cab_bck_rev(1,1)}


// Sprite Selection

	// Forwards

		// Front
		// Shape Mask
			switch(FEAT_TRAINS, PARENT, ss_frt_200_series_cab02f_shp_mask, vehicle_type_id) {200:ss_frt_200_series_cab02f_rnd; 202:ss_frt_200_series_cab02f_rnd; 204:ss_frt_200_series_cab02f_rnd;}
			// 2cc mask
			switch(FEAT_TRAINS, PARENT, ss_frt_200_series_cab02f_2cc_id, vehicle_type_id) {200:ss_frt_200_series_cab02f_rn2; 201:ss_frt_200_series_cab02f_sh2; 202:ss_frt_200_series_cab02f_rn2; 204:ss_frt_200_series_cab02f_rn2; }
        	switch(FEAT_TRAINS, PARENT, ss_frt_200_series_cab02f_2cc_mask, cargo_subtype) {1:ss_frt_200_series_cab02f_2cc_id;  2:ss_frt_200_series_cab02f_rfb; 4:ss_frt_200_series_cab02f_rn2; 5:ss_frt_200_series_cab02f_rfb; }
		
		switch(FEAT_TRAINS, SELF, sw_200_series_cab02f_frt_stack, [ 
			STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8) ]) { 
				0: ss_frt_200_series_cab02f_sha;       	    // Base for Front
				1: ss_frt_200_series_cab02f_shp_mask;		// Shape mask for Front
				2: ss_frt_200_series_cab02f_2cc_mask;		// IRL 2cc mask for Front
			}

		switch(FEAT_TRAINS, SELF, sw_200_series_cab02f_frt_longsprite, PrevPartSame() ) { 1: sw_200_series_cab02f_frt_stack; dummy_sprites; }

		/* MID */

       // Mid Parts
            // Shape Mask
                switch(FEAT_TRAINS, PARENT, ss_mid_200_series_cab02f_shp_mask, vehicle_type_id) {200:ss_mid_200_series_cab02f_rnd; 202:ss_mid_200_series_cab02f_rnd; 204:ss_mid_200_series_cab02f_rnd;}
            // 2cc Mask
                switch(FEAT_TRAINS, PARENT, ss_mid_200_series_cab02f_2cc_id, vehicle_type_id) {200:ss_mid_200_series_cab02f_rn2; 201:ss_mid_200_series_cab02f_sh2; 202:ss_mid_200_series_cab02f_rn2; 204:ss_mid_200_series_cab02f_rn2; }
        		switch(FEAT_TRAINS, PARENT, ss_mid_200_series_cab02f_2cc_mask, cargo_subtype) {1:ss_mid_200_series_cab02f_2cc_id;  2:ss_mid_200_series_cab02f_rfb; 4:ss_mid_200_series_cab02f_rn2; 5:ss_mid_200_series_cab02f_rfb; }

        // Mid LongSprite
            // Base
                switch(FEAT_TRAINS, SELF, longsprite_200_series_cab02f_sha, HideLongSprite() ) { 0: ss_std_200_series_cab02f_sha; }
            // Shape Mask
                switch(FEAT_TRAINS, PARENT, sw_std_200_series_cab02f_shp_mask, vehicle_type_id) {200:ss_std_200_series_cab02f_rnd; 202:ss_std_200_series_cab02f_rnd; 204:ss_std_200_series_cab02f_rnd; }
                switch(FEAT_TRAINS, SELF, longsprite_200_series_cab02f_shp, HideLongSprite() ) { 0: sw_std_200_series_cab02f_shp_mask; }     
            // Mask when 2cc
                switch(FEAT_TRAINS, PARENT, ss_std_200_series_cab02f_2cc_id, vehicle_type_id) {200:ss_std_200_series_cab02f_rn2; 201:ss_std_200_series_cab02f_sh2; 202:ss_std_200_series_cab02f_rn2; 204:ss_std_200_series_cab02f_rn2;}
        		switch(FEAT_TRAINS, PARENT, sw_std_200_series_cab02f_2cc_mask, cargo_subtype) {1:ss_std_200_series_cab02f_2cc_id;  2:ss_std_200_series_cab02f_rfb; 4:ss_std_200_series_cab02f_rn2; 5:ss_std_200_series_cab02f_rfb;}
                switch(FEAT_TRAINS, SELF, longsprite_200_series_cab02f_2cc, HideLongSprite() ) { 0: sw_std_200_series_cab02f_2cc_mask; }
                        
        // Panto Decision
            switch(FEAT_TRAINS, SELF, panto_midsprite_200_series_cab02f, PantoOnCabEvenConsist() ) { 1: panto_midsprite_200_f; }
            switch(FEAT_TRAINS, SELF, panto_longsprite_200_series_cab02f, PantoOnCabEvenConsist() ) { 1: panto_longsprite_200_f; }
            

		switch(FEAT_TRAINS, SELF, sw_200_series_cab02f_mid_stack, [ 
			STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8) ]) { 
				// Parts
                0: ss_mid_200_series_cab02f_sha;       	    // Base for Mid
                1: ss_mid_200_series_cab02f_shp_mask;		// Hikari mask for Mid
				2: ss_mid_200_series_cab02f_2cc_mask;		// 2cc masks for Mid
                // Long Sprite
				3: longsprite_200_series_cab02f_sha;	    // Base for LongSprite
				4: longsprite_200_series_cab02f_shp;        // IRL 2cc mask for LongSprite
                5: longsprite_200_series_cab02f_2cc;        // Hikari mask for LongSprite
                // Pantos
                6: panto_midsprite_200_series_cab02f;       // Panto for Mid
                7: panto_longsprite_200_series_cab02f;      // Panto for LongSprite
			}

		// Back
			// Shape Mask
			switch(FEAT_TRAINS, PARENT, ss_bck_200_series_cab02f_shp_mask, vehicle_type_id) {200:ss_bck_200_series_cab02f_rnd; 202:ss_bck_200_series_cab02f_rnd; 204:ss_bck_200_series_cab02f_rnd;}
			// 2cc mask
			switch(FEAT_TRAINS, PARENT, ss_bck_200_series_cab02f_2cc_id, vehicle_type_id) {200:ss_bck_200_series_cab02f_rn2; 201:ss_bck_200_series_cab02f_sh2; 202:ss_bck_200_series_cab02f_rn2; 204:ss_bck_200_series_cab02f_rn2; }
        	switch(FEAT_TRAINS, PARENT, ss_bck_200_series_cab02f_2cc_mask, cargo_subtype) {1:ss_bck_200_series_cab02f_2cc_id;  2:ss_bck_200_series_cab02f_rfb; 4:ss_bck_200_series_cab02f_rn2; 5:ss_bck_200_series_cab02f_rfb; }

		switch(FEAT_TRAINS, SELF, sw_200_series_cab02f_bck_stack, [ 
			STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8) ]) { 
				0: ss_bck_200_series_cab02f_sha;       	    // Base for Front
				1: ss_bck_200_series_cab02f_shp_mask;		// Shape mask for Front
				2: ss_bck_200_series_cab02f_2cc_mask;		// IRL 2cc mask for Front
			}

		switch(FEAT_TRAINS, SELF, sw_200_series_cab02f_bck_longsprite, NextPartSame() ) { 1: sw_200_series_cab02f_bck_stack; dummy_sprites; }

		switch (FEAT_TRAINS, SELF, sw_200_series_cab02f, position_in_consist_from_end % 3 ) {				
            0: sw_200_series_cab02f_frt_longsprite;
            1: sw_200_series_cab02f_mid_stack;
            2: sw_200_series_cab02f_bck_longsprite;
        }

	// Backwards

		// Front
			// Shape Mask
			switch(FEAT_TRAINS, PARENT, ss_frt_200_series_cab02b_shp_mask, vehicle_type_id) {200:ss_frt_200_series_cab02b_rnd; 202:ss_frt_200_series_cab02b_rnd; }
			// 2cc mask
			switch(FEAT_TRAINS, PARENT, ss_frt_200_series_cab02b_2cc_id, vehicle_type_id) {200:ss_frt_200_series_cab02b_rn2; 201:ss_frt_200_series_cab02b_sh2; 202:ss_frt_200_series_cab02b_rn2; }
        	switch(FEAT_TRAINS, PARENT, ss_frt_200_series_cab02b_2cc_mask, cargo_subtype) {1:ss_frt_200_series_cab02b_2cc_id;  2:ss_frt_200_series_cab02b_rfb; }
		
		switch(FEAT_TRAINS, SELF, sw_200_series_cab02b_frt_stack, [ 
			STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8) ]) { 
				0: ss_frt_200_series_cab02b_sha;       	    // Base for Front
				1: ss_frt_200_series_cab02b_shp_mask;		// Shape mask for Front
				2: ss_frt_200_series_cab02b_2cc_mask;		// IRL 2cc mask for Front
			}

		switch(FEAT_TRAINS, SELF, sw_200_series_cab02b_frt_longsprite, NextPartSame() ) { 1: sw_200_series_cab02b_frt_stack; dummy_sprites; }

		/* MID */

        // Mid Parts
            // Shape Mask
                switch(FEAT_TRAINS, PARENT, ss_mid_200_series_cab02b_shp_mask, vehicle_type_id) {200:ss_mid_200_series_cab02b_rnd; 202:ss_mid_200_series_cab02b_rnd; }
            // 2cc Mask
                switch(FEAT_TRAINS, PARENT, ss_mid_200_series_cab02b_2cc_id, vehicle_type_id) {200:ss_mid_200_series_cab02b_rn2; 201:ss_mid_200_series_cab02b_sh2; 202:ss_mid_200_series_cab02b_rn2; }
        		switch(FEAT_TRAINS, PARENT, ss_mid_200_series_cab02b_2cc_mask, cargo_subtype) {1:ss_mid_200_series_cab02b_2cc_id;  2:ss_mid_200_series_cab02b_rfb; }

        // Mid LongSprite
            // Base
                switch(FEAT_TRAINS, SELF, longsprite_200_series_cab02b_sha, HideLongSprite() ) { 0: ss_std_200_series_cab02b_sha; }
            // Shape Mask
                switch(FEAT_TRAINS, PARENT, sw_std_200_series_cab02b_shp_mask, vehicle_type_id) {200:ss_std_200_series_cab02b_rnd; 202:ss_std_200_series_cab02b_rnd; }
                switch(FEAT_TRAINS, SELF, longsprite_200_series_cab02b_shp, HideLongSprite() ) { 0: sw_std_200_series_cab02b_shp_mask; }     
            // Mask when 2cc
                switch(FEAT_TRAINS, PARENT, ss_std_200_series_cab02b_2cc_id, vehicle_type_id) {200:ss_std_200_series_cab02b_rn2; 201:ss_std_200_series_cab02b_sh2; 202:ss_std_200_series_cab02b_rn2; }
        		switch(FEAT_TRAINS, PARENT, sw_std_200_series_cab02b_2cc_mask, cargo_subtype) {1:ss_std_200_series_cab02b_2cc_id;  2:ss_std_200_series_cab02b_rfb; }
                switch(FEAT_TRAINS, SELF, longsprite_200_series_cab02b_2cc, HideLongSprite() ) { 0: sw_std_200_series_cab02b_2cc_mask; }
            
        // Panto Decision
            switch(FEAT_TRAINS, SELF, panto_midsprite_200_series_cab02b, PantoOnCabEvenConsist() ) { 1: panto_midsprite_200_b; }
            switch(FEAT_TRAINS, SELF, panto_longsprite_200_series_cab02b, PantoOnCabEvenConsist() ) { 1: panto_longsprite_200_b; }

		switch(FEAT_TRAINS, SELF, sw_200_series_cab02b_mid_stack, [ 
			STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8) ]) { 
				// Parts
                0: ss_mid_200_series_cab02b_sha;       	    // Base for Mid
                1: ss_mid_200_series_cab02b_shp_mask;		// Hikari mask for Mid
				2: ss_mid_200_series_cab02b_2cc_mask;		// 2cc masks for Mid
                // Long Sprite
				3: longsprite_200_series_cab02b_sha;	    // Base for LongSprite
				4: longsprite_200_series_cab02b_shp;        // IRL 2cc mask for LongSprite
                5: longsprite_200_series_cab02b_2cc;        // Hikari mask for LongSprite
                // Pantos
                6: panto_midsprite_200_series_cab02b;       // Panto for Mid
                7: panto_longsprite_200_series_cab02b;      // Panto for LongSprite
			}

		// Back
			// Shape Mask
			switch(FEAT_TRAINS, PARENT, ss_bck_200_series_cab02b_shp_mask, vehicle_type_id) {200:ss_bck_200_series_cab02b_rnd; 202:ss_bck_200_series_cab02b_rnd; }
			// 2cc mask
			switch(FEAT_TRAINS, PARENT, ss_bck_200_series_cab02b_2cc_id, vehicle_type_id) {200:ss_bck_200_series_cab02b_rn2; 201:ss_bck_200_series_cab02b_sh2; 202:ss_bck_200_series_cab02b_rn2; }
        	switch(FEAT_TRAINS, PARENT, ss_bck_200_series_cab02b_2cc_mask, cargo_subtype) {1:ss_bck_200_series_cab02b_2cc_id;  2:ss_bck_200_series_cab02b_rfb; }

		switch(FEAT_TRAINS, SELF, sw_200_series_cab02b_bck_stack, [ 
			STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8) ]) { 
				0: ss_bck_200_series_cab02b_sha;       	    // Base for Front
				1: ss_bck_200_series_cab02b_shp_mask;		// Shape mask for Front
				2: ss_bck_200_series_cab02b_2cc_mask;		// IRL 2cc mask for Front
			}

		switch(FEAT_TRAINS, SELF, sw_200_series_cab02b_bck_longsprite, PrevPartSame() ) { 1: sw_200_series_cab02b_bck_stack; dummy_sprites; }

		switch (FEAT_TRAINS, SELF, sw_200_series_cab02b, position_in_consist % 3 ) {				
            0: sw_200_series_cab02b_frt_longsprite;
            1: sw_200_series_cab02b_mid_stack;
            2: sw_200_series_cab02b_bck_longsprite;
        }
